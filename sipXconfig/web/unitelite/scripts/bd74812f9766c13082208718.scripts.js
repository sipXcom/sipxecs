!function(){"use strict";angular.module("config",[]).constant("CONFIG",{debug:!0,chatstateGoneTimeout:6e5,keyPhotos:"uw:roster:photos",prefix:"ouc",authCookie:"oucunitewebauth",version:"0.7.8",baseRest:"/sipxconfig/rest"})}(),function(){"use strict";angular.module("emoji",[]).constant("EMOJI",[{name:"Happy",equivalents:[":-)",":)"],src:"media/emoticons/Default/happy.png"},{name:"Angry",equivalents:[">:o",">:-o","x("],src:"media/emoticons/Default/angry.png"},{name:"Blushing",equivalents:[":-[",':">'],src:"media/emoticons/Default/blush.png"},{name:"Confused",equivalents:["?:|",":-/"],src:"media/emoticons/Default/confused.png"},{name:"Cool",equivalents:["B-)"],src:"media/emoticons/Default/cool.png"},{name:"Crying",equivalents:[':"(',":(("],src:"media/emoticons/Default/cry.png"},{name:"Devil",equivalents:["]:)",">:)"],src:"media/emoticons/Default/devil.png"},{name:"Big Grin",equivalents:[":-D",":D"],src:"media/emoticons/Default/grin.png"},{name:"Laughing",equivalents:[":^0",":))"],src:"media/emoticons/Default/laugh.png"},{name:"Love Struck",equivalents:[":x"],src:"media/emoticons/Default/love.png"},{name:"Mischief",equivalents:[";\\",":>"],src:"media/emoticons/Default/mischief.png"},{name:"Sad",equivalents:[":-(",":("],src:"media/emoticons/Default/sad.png"},{name:"Straight Face",equivalents:[":|",":-|"],src:"media/emoticons/Default/plain.png"},{name:"Shocked",equivalents:[":0",":-O",":O"],src:"media/emoticons/Default/shocked.png"},{name:"Silly",equivalents:[":-p",":p",":-P",":p"],src:"media/emoticons/Default/silly.png"},{name:"Wink",equivalents:[";-)",";)"],src:"media/emoticons/Default/wink.png"},{name:"Alert",equivalents:["(!)"],src:"media/emoticons/Default/alert.png"},{name:"Info",equivalents:["(i)"],src:"media/emoticons/Default/info.png"},{name:"Minus",equivalents:["(-)"],src:"media/emoticons/Default/minus.png"},{name:"Plus",equivalents:["(+)"],src:"media/emoticons/Default/plus.png"},{name:"Heart",equivalents:["(heart)"],src:"media/emoticons/Default/heart.png"},{name:"Sleepy",equivalents:["(:|"],src:"media/emoticons/Default/sleepy.gif"},{name:'Let"s Party',equivalents:["<:-P"],src:"media/emoticons/Default/party.gif"},{name:"Rolling Eyes",equivalents:["8-|"],src:"media/emoticons/Default/eyeroll.gif"}])}(),function(){"use strict";var notify=angular.module("notify",[]);notify.factory("notify",function(){return window.Notify})}(),function(){"use strict";var underscore=angular.module("underscore",[]);underscore.factory("_",function(){return window._})}(),function(){"use strict";var Base64=function(){var keyStr="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",obj={encode:function(input){var chr1,chr2,chr3,enc1,enc2,enc3,enc4,output="",i=0;do chr1=input.charCodeAt(i++),chr2=input.charCodeAt(i++),chr3=input.charCodeAt(i++),enc1=chr1>>2,enc2=(3&chr1)<<4|chr2>>4,enc3=(15&chr2)<<2|chr3>>6,enc4=63&chr3,isNaN(chr2)?enc3=enc4=64:isNaN(chr3)&&(enc4=64),output=output+keyStr.charAt(enc1)+keyStr.charAt(enc2)+keyStr.charAt(enc3)+keyStr.charAt(enc4);while(i<input.length);return output},decode:function(input){var chr1,chr2,chr3,enc1,enc2,enc3,enc4,output="",i=0;input=input.replace(/[^A-Za-z0-9\+\/\=]/g,"");do enc1=keyStr.indexOf(input.charAt(i++)),enc2=keyStr.indexOf(input.charAt(i++)),enc3=keyStr.indexOf(input.charAt(i++)),enc4=keyStr.indexOf(input.charAt(i++)),chr1=enc1<<2|enc2>>4,chr2=(15&enc2)<<4|enc3>>2,chr3=(3&enc3)<<6|enc4,output+=String.fromCharCode(chr1),64!=enc3&&(output+=String.fromCharCode(chr2)),64!=enc4&&(output+=String.fromCharCode(chr3));while(i<input.length);return output}};return obj}();window.Base64=Base64}(),function(window,document,undefined){"use strict";var uniteWeb=angular.module("uw",["ngAnimate","ngSanitize","ngCookies","ngRoute","config","emoji","underscore","LocalStorageModule","notify","xml","dragAndDrop","ngOrderObjectBy","angularFileUpload","angularUtils.directives.dirPagination"]);uniteWeb.config(["$routeProvider","$httpProvider","$compileProvider","$provide",function($routeProvider,$httpProvider,$compileProvider,$provide){$routeProvider.when("/voicemail",{templateUrl:"views/main.html",controller:["$scope","$location","restService","uiService",function($scope,$location,restService,uiService){$scope.received=!0,restService.getLogindetails().then(function(data){restService.updateCredentials(data["login-details"].userName),restService.connected=!0},function(err){console.log(err)}).then(function(){return restService.getPhonebook()}).then(function(data){restService.phonebook=data.phonebook,restService.phonebook.forEach(function(el,i){restService.phonebook[i].name=restService.phonebook[i]["contact-information"].imDisplayName||restService.phonebook[i]["first-name"]+" "+restService.phonebook[i]["last-name"]}),uiService.util.populateContactList(),uiService.util.changeView(uiService.ui.root.templates[3])})["catch"](function(err){console.log(err)})}]}).when("/",{templateUrl:"views/main.html",controller:["$scope","$location","restService","uiService",function($scope,$location,restService,uiService){$scope.received=!0,restService.getLogindetails().then(function(data){restService.updateCredentials(data["login-details"].userName),restService.connected=!0},function(err){console.log(err)}).then(function(){return restService.getPhonebook()}).then(function(data){restService.phonebook=data.phonebook,restService.phonebook.forEach(function(el,i){restService.phonebook[i].name=restService.phonebook[i]["contact-information"].imDisplayName||restService.phonebook[i]["first-name"]+" "+restService.phonebook[i]["last-name"]}),uiService.util.populateContactList()})["catch"](function(err){console.log(err)})}]}).otherwise({redirectTo:"/"}),$httpProvider.interceptors.push(function($q){return{request:function(config){return config||$q.when(config)},response:function(response){return response||$q.when(response)}}}),$compileProvider.aHrefSanitizationWhitelist(/^\s*(http|https|blob|mailto):/),$compileProvider.imgSrcSanitizationWhitelist(/^\s*(https?|ftp|file|blob):|data:image\//),$provide.decorator("ngModelDirective",function($delegate){var ngModel=$delegate[0],controller=ngModel.controller;return ngModel.controller=["$scope","$element","$attrs","$injector",function(scope,element,attrs,$injector){var $interpolate=$injector.get("$interpolate");attrs.$set("name",$interpolate(attrs.name||"")(scope)),$injector.invoke(controller,this,{$scope:scope,$element:element,$attrs:attrs})}],$delegate}),$provide.decorator("formDirective",function($delegate){var form=$delegate[0],controller=form.controller;return form.controller=["$scope","$element","$attrs","$injector",function(scope,element,attrs,$injector){var $interpolate=$injector.get("$interpolate");attrs.$set("name",$interpolate(attrs.name||attrs.ngForm||"")(scope)),$injector.invoke(controller,this,{$scope:scope,$element:element,$attrs:attrs})}],$delegate})}]),window.uw=uniteWeb,"function"==typeof define&&define.amd&&define(uw)}(window,document),function(){"use strict";uw.factory("profileFactory",["strophe",function(strophe){function makeHumanReadable(text){var translated=text,dict=[{vcard:"ADR",human:"Address"},{vcard:"CTRY",human:"Country"},{vcard:"EXTADD",human:"Extended-Address"},{vcard:"HOME",human:"Home"},{vcard:"LOCALITY",human:"Locality"},{vcard:"PCODE",human:"Postal-Code"},{vcard:"REGION",human:"Region"},{vcard:"STREET",human:"Street"},{vcard:"BDAY",human:"Birth-Day"},{vcard:"DESC",human:"Description"},{vcard:"EMAIL",human:"Email"},{vcard:"INTERNET",human:"Internet"},{vcard:"PREF",human:"Pref"},{vcard:"USERID",human:"User"},{vcard:"FN",human:"Full-Name"},{vcard:"JABBERID",human:"JabberID"},{vcard:"N",human:"Names"},{vcard:"FAMILY",human:"Family"},{vcard:"GIVEN",human:"Given"},{vcard:"MIDDLE",human:"Middle"},{vcard:"NICKNAME",human:"Nickname"},{vcard:"ORG",human:"Organization"},{vcard:"ORGUNIT",human:"Organizational Unit"},{vcard:"PHOTO",human:"Photo"},{vcard:"BINVAL",human:"Binary-Value"},{vcard:"TYPE",human:"Type"},{vcard:"ROLE",human:"Role"},{vcard:"TEL",human:"Telephone"},{vcard:"HOME",human:"Home-Phone"},{vcard:"MSG",human:"Messaging"},{vcard:"NUMBER",human:"Number"},{vcard:"TITLE",human:"Title"},{vcard:"URL",human:"Url"},{vcard:"X-ALT-EMAIL",human:"Alternative-Email"},{vcard:"X-ALT-JABBERID",human:"Alternative-JabberID"},{vcard:"X-ASSISTANT",human:"Assistant"},{vcard:"X-ASSISTANT-PHONE",human:"Assistant-Phone"},{vcard:"X-DID",human:"DID"},{vcard:"X-FACEBOOK",human:"Facebook-URL"},{vcard:"X-INTERN",human:"Internal-Number"},{vcard:"X-LINKEDIN",human:"LinkedIn-URL"},{vcard:"X-LOCATION",human:"Location"},{vcard:"X-MANAGER",human:"Manager"},{vcard:"X-SALUTATION",human:"Salutation"},{vcard:"X-TWITTER",human:"Twitter-URL"},{vcard:"X-XING",human:"Xing-URL"}];return _.find(dict,function(obj){return translated===obj.vcard||translated===obj.human?void(translated=translated===obj.vcard?obj.human:obj.vcard):void 0}),translated}var profile={};return profile.init=function(jid){return{jid:jid}},profile.set=function(vCard,special){var jqEl,text,$=angular.element,self=this,parsed={},temp=special;return special?_.each($(vCard).children(),function(el,idx){if(jqEl=$(el),"TEL"===special)if(2>idx)temp+="-"+el.nodeName;else{if(temp+="-"+el.nodeName,text=jqEl.text(),0===text.length)return;parsed[temp]=text}if("ADR"===special)if(0===idx)temp+="-"+el.nodeName;else{if(text=jqEl.text(),0===text.length)return;parsed[temp+"-"+el.nodeName]=text}}):_.each($(vCard).children(),function(el,idx){if(jqEl=$(el),jqEl.children().length>0)"TEL"===el.nodeName?parsed[el.nodeName+"-"+$(jqEl[0].children[0])[0].nodeName+"-"+$(jqEl[0].children[1])[0].nodeName]=self.set(el,el.nodeName):"ADR"===el.nodeName?parsed[el.nodeName+"-"+$(jqEl[0].children[0])[0].nodeName]=self.set(el,el.nodeName):parsed[el.nodeName]=self.set(el);else{if(text=jqEl.text(),0===text.length)return;parsed[el.nodeName]=text}}),parsed},profile.util={getFullName:function(){},getPhotoSrc:function(){},translate:function(text){return makeHumanReadable(text)}},profile}])}(),function(){"use strict";uw.factory("request",["$http",function($http){return function(conf){return $http(conf).success(function(data){return data}).error(function(data,status,headers){return new Error})}}])}(),function(){"use strict";uw.factory("notification",["notify","$timeout",function(notify,$timeout){return function(obj){function onDisplay(event){$timeout(function(){event.currentTarget.cancel?event.currentTarget.cancel():event.currentTarget.close()},3e3)}function onClk(event){event.currentTarget.cancel?event.currentTarget.cancel():event.currentTarget.close(),window.focus()}try{if(window.createPopup){var oPopup=window.createPopup(),oPopBody=oPopup.document.body,w=window.innerWidth,h=window.innerHeight;return oPopBody.style.backgroundColor="white",oPopBody.style.border="solid black 1px",oPopBody.style.fontFamily="Arial",oPopBody.style.padding="20px",oPopBody.innerHTML="<strong>Unite - "+obj.title+"</strong><br/>"+obj.body,oPopup.show(w-200,h-90,180,80,document.body),!0}if(document.hasFocus())return!0;var myNotification=new Notify(obj.title,{body:obj.body,notifyShow:onDisplay,notifyClick:onClk});if(document.hasFocus()||myNotification.show(),$cookies.audio){var audio=new Audio;""!==audio.canPlayType('audio/mpeg;codecs="mp3"')?audio.src="styles/short_ping.mp3":""!==audio.canPlayType('audio/ogg;codecs="vorbis"')&&(audio.src="styles/short_ping.ogg"),audio.play()}updateBadge&&updateBadge!==!1&&favicoService.badge(1)}catch(err){console.log(err)}return!0}}])}(),function(){"use strict";uw.service("sharedFactory",["localStorageService","_","CONFIG",function(localStorage,_,CONFIG){var jid=(CONFIG.keyConversationList,CONFIG.keyArchiveObj,"");this.archive={};var archive=this.archive;return this.init=function(ownJid){jid=ownJid},this.archiveMessage=function(o){var obj=angular.copy(o),done=!1,addr=obj.from&&obj.to?obj.to:obj.from;if(addr=addr.replace(/^\s+|\s+$/g,""),archive[addr]||(archive[addr]=[]),0===archive[addr].length)archive[addr].push(obj);else{for(var i=0;i<archive[addr].length;i++)archive[addr][i].timestamp.toString()===obj.timestamp.toString()&&(archive[addr][i]=obj,done=!0);done||archive[addr].push(obj)}this.saveArchiveObj()},this.flushContactMessageList=function(jid){archive[jid]=[],console.log("flush"),this.saveArchiveObj(archive)},this.savePhotos=function(photos){this.save(CONFIG.keyPhotos,photos)},this.getPhotos=function(){var json=this.get(CONFIG.keyPhotos);return _.isEmpty(json)?[]:json},this.saveRoster=function(roster){this.save(CONFIG.keyRoster,roster)},this.getRoster=function(){var json=this.get(CONFIG.keyRoster);return _.isEmpty(json)?[]:json},this.getGroupChats=function(){var json=this.get(CONFIG.keyGroupChats);return _.isEmpty(JSON.parse(json))?[]:json},this.saveGroupChats=function(groups){this.save(CONFIG.keyGroupChats,groups)},this.getGroups=function(){var json=this.get(CONFIG.keyRosterGroups);return _.isEmpty(json)?[]:json},this.saveGroups=function(groups){this.save(CONFIG.keyRosterGroups,groups)},this.saveGroupsContact=function(obj){var roster=this.getRoster(),groups=this.getGroups();_.extend(roster[obj.jid],obj);for(var i=0;i<groups.length;i++)for(var j=0;j<groups[i].length;j++)(groups[i][j].jid=obj.jid)&&_.extend(groups[i][j],obj);this.saveGroups(groups),this.saveRoster(roster)},this.getContactMessageList=function(contactJid){return archive[contactJid]||(archive[contactJid]=[]),archive[contactJid]},this.delContactMessageList=function(contactJid){archive[contactJid]&&(delete archive[contactJid],this.saveArchiveObj())},this.getConversationList=function(){var json=this.get(CONFIG.keyConversationList);return _.isEmpty(json)?[]:json},this.saveConversationList=function(list){this.save(CONFIG.keyConversationList,list)},this.saveConversationListContact=function(obj){},this.saveArchiveObj=function(){this.save(CONFIG.keyArchiveObj,archive)},this.getArchiveObj=function(){this.archive=this.get(CONFIG.keyArchiveObj),"string"!=typeof this.archive&&_.extend(archive,this.archive)},this.save=function(key,json){var suff=this.getUserSuffix();if(suff){var str=angular.toJson(json);localStorage.add(key+suff,str)}},this.get=function(key){var str=localStorage.get(key+this.getUserSuffix())||"{}";return str},this.getUserSuffix=function(){var user=jid.split("#")[0];return""===user?!1:"."+user},this.decodeBase64=function(base64,cb){for(var rank,code,undef,base64Ranks=new Uint8Array([62,-1,-1,-1,63,52,53,54,55,56,57,58,59,60,61,-1,-1,-1,0,-1,-1,-1,0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,-1,-1,-1,-1,-1,-1,26,27,28,29,30,31,32,33,34,35,36,37,38,39,40,41,42,43,44,45,46,47,48,49,50,51]),len=base64.length,buffer=new Uint8Array(len/4*3|0),i=0,outptr=0,last=[0,0],state=0,save=0;len--;)code=base64.charCodeAt(i++),rank=base64Ranks[code-43],255!==rank&&rank!==undef&&(last[1]=last[0],last[0]=code,save=save<<6|rank,state++,4===state&&(buffer[outptr++]=save>>>16,61!==last[1]&&(buffer[outptr++]=save>>>8),61!==last[0]&&(buffer[outptr++]=save),state=0));return cb(buffer),buffer},this.settings={mainMenu:[{name:"Activity List",url:"views/activitylist.html",iconClass:"icon-activity_stream",show:"false"},{name:"Contacts",url:"views/rosterlist.html",iconClass:"icon-presence_meeting",show:"true"},{name:"Conference Bridge",url:"views/conference-bridge.html",iconClass:"icon-conference_call",type:"right",show:"true",fn:"conference"},{name:"Voicemails",url:"views/voicemails.html",iconClass:"icon-voicemail",type:"right",show:"true",fn:"voicemail"},{name:"My profile",url:"views/my-profile.html",iconClass:"icon-my-profile",type:"right",show:"true",fn:"profile"},{name:"Call history",url:"views/call-history.html",iconClass:"icon-call_history",type:"right",show:"true"},{name:"Settings",url:"views/settings.html",iconClass:"icon-settings_cogs",type:"right",show:"true"},{name:"Logout",url:"/",iconClass:"icon-logout",show:"true",type:"right",fn:"logout"},{name:"Search",url:"views/search.html",iconClass:"icon-settings_cogs",show:"false"},{name:"Chat",url:"views/chat.html",iconClass:"icon-settings",type:"right",show:"false"},{name:"default",url:"views/default-right.html",iconClass:"icon-settings_cogs",type:"right",show:"false"}],miniTemplates:[{name:"Profile",url:"views/profile.html"}],defaultPresences:[{icon:"icon-status_available",show:"Available",status:"",color:"#38b427"},{icon:"icon-clock_fill_away",show:"Away",status:"away",color:"#f18703"},{icon:"icon-presence_dnd",show:"Do not disturb",status:"dnd",color:"#e3352d"},{icon:"icon-clock_fill_xa",show:"Extended away",status:"xa",color:"#0d73b5"},{icon:"icon-presence_invisible",show:"Invisible",status:"invisible",color:"#bdbfc0"}],defaultLocations:[{icon:"",text:"Home"},{icon:"",text:"At work"},{icon:"",text:"On the road"}]},this.defaultImg="data:image/png;base64,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",this}])}(),function(){"use strict";uw.service("restService",["$rootScope","$http","$q","$sce","request","xmlParser","sharedFactory","CONFIG","_",function($rootScope,$http,$q,$sce,request,xmlParser,sharedFactory,CONFIG,_){function initSipRest(){return{getCDRlog:function(limit){return request(authHeaders({method:"GET",url:baseRest+"/my/redirect/cdr/"+self.cred.user+"?limit="+limit}))},getUserInfo:function(user){return request(authHeaders({method:"GET",url:baseRest+"/my/redirect/search/phonebook?query="+self.cred.user}))},getMessages:function(folder){return request(authHeaders({method:"GET",url:baseRest+"/my/redirect/mailbox/"+self.cred.user+"/"+folder}))},getMessage:function(id){return request(authHeaders({method:"GET",url:baseRest+"/my/redirect/media/"+self.cred.user+"/inbox/"+id,responseType:"arraybuffer"}))},putHeardMsg:function(id){return request(authHeaders({method:"PUT",url:baseRest+"/my/redirect/mailbox/"+self.cred.user+"/message/"+id+"/heard",data:{}}))},putMoveMsg:function(id,folder){return request(authHeaders({method:"PUT",url:baseRest+"/my/redirect/mailbox/"+self.cred.user+"/message/"+id+"/move/"+folder,data:{}}))},getHeardMsg:function(id){return request(authHeaders({method:"GET",url:baseRest+"/my/redirect/mailbox/"+self.cred.user+"/message/"+id+"/heard"}))},putTrashMsg:function(id){return request(authHeaders({method:"PUT",url:baseRest+"/my/redirect/mailbox/"+self.cred.user+"/message/"+id+"/delete",data:{}}))},putSubjectMessage:function(id,sub){return request(authHeaders({method:"PUT",url:baseRest+"/my/redirect/mailbox/"+self.cred.user+"/message/"+id+"/subject",data:sub}))},getActiveGreeting:function(){return request(authHeaders({method:"GET",url:baseRest+"/my/redirect/mailbox/"+self.cred.user+"/preferences/activegreeting"}))},delActiveGreeting:function(){return request(authHeaders({method:"DELETE",url:baseRest+"/my/redirect/mailbox/"+self.cred.user+"/preferences/activegreeting"}))},putActiveGreeting:function(greeting){return request(authHeaders({method:"PUT",body:"<activegreeting>"+greeting+"</activegreeting>",url:baseRest+"/my/redirect/mailbox/"+self.cred.user+"/preferences/activegreeting"}))},postBasicCall:function(to){return request(authHeaders({method:"POST",url:baseRest+"/my/redirect/callcontroller/"+self.cred.user+"/"+escape(to)}))},getBasicCall:function(to){return request(authHeaders({method:"GET",url:baseRest+"/my/redirect/callcontroller/"+self.cred.user+"/"+escape(to)}))},getConfList:function(){return request(authHeaders({method:"GET",url:baseRest+"/my/conferences",headers:{Accept:"application/json"}}))},getConfSettings:function(conf){return request(authHeaders({method:"GET",url:baseRest+"/my/conferences/"+conf,headers:{Accept:"application/json"}}))},putConfSettings:function(conf,data){return request(authHeaders({method:"PUT",url:baseRest+"/my/conferences/"+conf,data:data}))},putConfLock:function(name){return request(authHeaders({method:"PUT",url:baseRest+"/my/conference/"+name+"/lock"}))},putConfInvite:function(conf,to){return request(authHeaders({method:"GET",url:baseRest+"/my/conference/"+conf+"/invite&"+to}))},getConfPartList:function(conf){return request(authHeaders({method:"GET",url:baseRest+"/my/conferencedetails/"+conf,headers:{Accept:"application/json"}}))},getConfKick:function(conf,to){return request(authHeaders({method:"GET",url:baseRest+"/my/conference/"+conf+"/kick&"+to}))},getConfMute:function(conf,to){return request(authHeaders({method:"GET",url:baseRest+"/my/conference/"+conf+"/mute&"+to}))},getConfUnmute:function(conf,to){return request(authHeaders({method:"GET",url:baseRest+"/my/conference/"+conf+"/unmute&"+to}))},getConfDeaf:function(conf,to){return request(authHeaders({method:"GET",url:baseRest+"/my/conference/"+conf+"/deaf&"+to}))},getConfUndeaf:function(conf,to){return request(authHeaders({method:"GET",url:baseRest+"/my/conference/"+conf+"/undeaf&"+to}))},getConfPin:function(conf,pin){return request(authHeaders({method:"GET",url:baseRest+"/my/conference/"+conf+"/pin&"+pin}))},getPhonebook:function(){return request(authHeaders({method:"GET",url:baseRest+"/my/phonebook",headers:{Accept:"application/json"}}))},putPassword:function(pass){return request(authHeaders({method:"PUT",url:baseRest+"/my/portal/password/"+encodeURIComponent(pass),data:{}}))},getImBot:function(){return request(authHeaders({method:"GET",url:baseRest+"/my/imbot/prefs"}))},putImBot:function(data){return request(authHeaders({method:"PUT",url:baseRest+"/my/imbot/prefs",data:data}))},getSpeeddial:function(){return request(authHeaders({method:"GET",url:baseRest+"/my/speeddial"}))},putSpeeddial:function(data){return request(authHeaders({method:"PUT",url:baseRest+"/my/speeddial",data:data}))},getContactInfo:function(){return request(authHeaders({method:"GET",url:baseRest+"/my/contact-information",headers:{Accept:"application/json"}}))},putContactInfo:function(data){return request(authHeaders({method:"PUT",url:baseRest+"/my/contact-information",data:data}))},getLogindetails:function(){return request(authHeaders({method:"GET",url:baseRest+"/my/logindetailsunite",headers:{Accept:"application/json"}}))},getSchedule:function(){return request(authHeaders({method:"GET",url:baseRest+"/my/callfwdsched/",headers:{Accept:"application/json"}}))},putSchedule:function(id,data){return request(authHeaders({method:"PUT",url:baseRest+"/my/callfwdsched/"+id,data:data}))},postSchedule:function(data){return request(authHeaders({method:"POST",url:baseRest+"/my/callfwdsched/",data:data}))},delSchedule:function(id,data){return request(authHeaders({method:"DELETE",url:baseRest+"/my/callfwdsched/"+id}))},getForward:function(){return request(authHeaders({method:"GET",url:baseRest+"/my/callfwd/",headers:{Accept:"application/json"}}))},putForward:function(data){return request(authHeaders({method:"PUT",url:baseRest+"/my/callfwd/",data:data}))},getPersonalAttendant:function(){return request(authHeaders({method:"GET",url:baseRest+"/my/voicemail/attendant",headers:{Accept:"application/json"}}))},putPersonalAttendant:function(data){return request(authHeaders({method:"PUT",url:baseRest+"/my/voicemail/attendant",data:data}))},getPersonalAttendantLang:function(){return request(authHeaders({method:"GET",url:baseRest+"/my/voicemail/attendant/lang",headers:{Accept:"application/json"}}))},getVmPrefs:function(){return request(authHeaders({method:"GET",url:baseRest+"/my/vmprefs",headers:{Accept:"application/json"}}))},putVmPrefs:function(data){return request(authHeaders({method:"PUT",url:baseRest+"/my/vmprefs",data:data}))},putVmPin:function(data){return request(authHeaders({method:"PUT",url:baseRest+"/my/voicemail/pin/"+data,data:data}))},getMohPermission:function(){return request(authHeaders({method:"GET",url:baseRestNew+"/my/moh/permission",headers:{Accept:"application/json"}}))},getMohSettings:function(){return request(authHeaders({method:"GET",url:baseRestNew+"/my/moh/settings/moh/audio-source",headers:{Accept:"application/json"}}))},putMohSettings:function(data){return request(authHeaders({method:"PUT",url:baseRestNew+"/my/moh/settings/moh/audio-source",headers:{"Content-type":"text"},data:data}))},getMohFiles:function(){return request(authHeaders({method:"GET",url:baseRestNew+"/my/moh/prompts"}))},deleteMohFile:function(data){return request(authHeaders({method:"DELETE",url:baseRestNew+"/my/moh/prompts/"+data}))},listenMohFile:function(data){return request(authHeaders({method:"GET",url:baseRestNew+"/my/moh/prompts/"+data}))},getIMproperties:function(){return request(authHeaders({method:"GET",url:"/unite/im.properties"}))},getKeepAlive:function(){return request(authHeaders({method:"GET",url:baseRest+"/my/keepalive"}))},getCallHistory:function(){return request(authHeaders({method:"GET",url:baseRest+"/my/redirect/cdr/"+self.cred.user}))}}}function parseXml(xml,cb){var $=angular.element,children=xmlParser.parse(xml).children?$(xmlParser.parse(xml).children)[0].children:$(xmlParser.parse(xml)).children().children()?$(xmlParser.parse(xml)).children().children():null,arr=[],attrs=[],obj={},subChildren=[];_.each(children,function(child){attrs=$(child)[0].attributes,subChildren=$(child).children(),_.isEmpty(attrs)||(obj=parseAttrs(child),_.isEmpty(obj)||(arr.push(obj),obj={})),_.isEmpty(subChildren)||(_.each(subChildren,function(c){switch($(c)[0].tagName){case"caller_aor":obj.from=$(c)[0].textContent;break;case"callee_aor":obj.to=$(c)[0].textContent;break;case"start_time":obj.start=$(c)[0].textContent;break;case"duration":obj.duration=$(c)[0].textContent;break;case"timestamp":case"call-id":case"method":break;case"status-line":obj.status=$(c)[0].textContent}}),_.isEmpty(obj)||(arr.push(obj),obj={}))}),cb(arr)}function parseAttrs(NamedNodeMap){var attrs=angular.element(NamedNodeMap)[0].attributes,obj={};return _.each(attrs,function(attr){obj[attr.name.toString()]=filterXmlValue(attr.value.toString())}),obj}function filterXmlValue(val){var value=val;switch(value.toLowerCase()){case"true":case"yes":case"1":value=!0;break;case"false":case"no":case"0":value=!1;break;default:value=_.isNaN(parseInt(value))?unescape(val):value.toString()}return value}function authHeaders(conf){return(-1!==window.navigator.userAgent.indexOf("MSIE ")||-1!==window.navigator.userAgent.indexOf("Trident/"))&&(conf.url=conf.url+"?invcache="+Math.floor(99999*Math.random()+1e4)),_.extend(conf,{cache:!1})}var baseRest=CONFIG.baseRest,baseRestNew=baseRest.replace("rest","api"),sipRest=initSipRest(),msgUrls={},self=this;this.cred={user:"",pass:""},this.connected=!1,this.phonebook=null,this.activityList=null,this.updateCredentials=function(user,pass){this.cred.user=user||null,this.cred.pass=pass||null},this.getCDRlog=function(limit){var deferred=$q.defer();return sipRest.getCDRlog(limit).success(function(data){parseXml(data,function(parsed){
deferred.resolve(parsed)})}).error(function(e){deferred.reject(e)}),deferred.promise},this.getMessages=function(folder){var deferred=$q.defer();return sipRest.getMessages(folder).success(function(data){parseXml(data,function(parsed){deferred.resolve(parsed)})}).error(function(e){deferred.reject(e)}),deferred.promise},this.getMessage=function(id){var blob,deferred=$q.defer();return msgUrls[id]?deferred.resolve(msgUrls[id]):sipRest.getMessage(id).success(function(data){blob=new Blob([data]),msgUrls[id]=$sce.trustAsResourceUrl(window.URL.createObjectURL(blob)),deferred.resolve(msgUrls[id])}).error(function(e){deferred.reject(e)}),deferred.promise},this.delMessage=function(id){var deferred=$q.defer();return sipRest.putTrashMsg(id).success(function(data){delete msgUrls[id],deferred.resolve(data)}).error(function(e){deferred.reject(e)}),deferred.promise},this.heardMessage=function(id){var deferred=$q.defer();return sipRest.putHeardMsg(id).success(function(data){deferred.resolve(data)}).error(function(e){deferred.reject(e)}),deferred.promise},this.putMoveMsg=function(id,folder){var deferred=$q.defer();return id=id.trim(),sipRest.putMoveMsg(id,folder).success(function(data){deferred.resolve(data)}).error(function(e){deferred.reject(e)}),deferred.promise},this.getHeardMessage=function(id){var deferred=$q.defer();return sipRest.getHeardMsg(id).success(function(data){deferred.resolve(data)}).error(function(e){deferred.reject(e)}),deferred.promise},this.putSubjectMessage=function(id,sub){var deferred=$q.defer();return sipRest.putSubjectMessage(id,sub).success(function(data){deferred.resolve(data)}).error(function(e){deferred.reject(e)}),deferred.promise},this.postBasicCall=function(to){var deferred=$q.defer();return sipRest.postBasicCall(to).success(function(data){deferred.resolve(data)}).error(function(e){deferred.reject(e)}),deferred.promise},this.getBasicCall=function(to){var deferred=$q.defer();return sipRest.getBasicCall(to).success(function(data){parseXml(data,function(parsed){deferred.resolve(parsed)})}).error(function(e){deferred.reject(e)}),deferred.promise},this.getConfList=function(){var deferred=$q.defer();return sipRest.getConfList().success(function(data){deferred.resolve(data)}).error(function(e){deferred.reject(e)}),deferred.promise},this.putConfInvite=function(conf,to){var deferred=$q.defer();return sipRest.putConfInvite(conf,to).success(function(data){deferred.resolve(data)}).error(function(e){deferred.reject(e)}),deferred.promise},this.getConfPartList=function(conf){var deferred=$q.defer();return sipRest.getConfPartList(conf).success(function(data){deferred.resolve(data)}).error(function(data,status){deferred.reject(status)}),deferred.promise},this.getConfSettings=function(conf){var deferred=$q.defer();return sipRest.getConfSettings(conf).success(function(data){deferred.resolve(data)}).error(function(data,status){deferred.reject(status)}),deferred.promise},this.putConfSettings=function(conf,data){var deferred=$q.defer();return sipRest.putConfSettings(conf,data).success(function(data){deferred.resolve(data)}).error(function(data,status){deferred.reject(status)}),deferred.promise},this.getConfKick=function(conf,to){var deferred=$q.defer();return sipRest.getConfKick(conf,to).success(function(data){deferred.resolve(data)}).error(function(e){deferred.reject(e)}),deferred.promise},this.getConfMute=function(conf,to){var deferred=$q.defer();return sipRest.getConfMute(conf,to).success(function(data){deferred.resolve(data)}).error(function(e){deferred.reject(e)}),deferred.promise},this.getConfUnmute=function(conf,to){var deferred=$q.defer();return sipRest.getConfUnmute(conf,to).success(function(data){deferred.resolve(data)}).error(function(e){deferred.reject(e)}),deferred.promise},this.getConfDeaf=function(conf,to){var deferred=$q.defer();return sipRest.getConfDeaf(conf,to).success(function(data){deferred.resolve(data)}).error(function(e){deferred.reject(e)}),deferred.promise},this.getConfUndeaf=function(conf,to){var deferred=$q.defer();return sipRest.getConfUndeaf(conf,to).success(function(data){deferred.resolve(data)}).error(function(e){deferred.reject(e)}),deferred.promise},this.getConfPin=function(conf,pin){var deferred=$q.defer();return sipRest.getConfPin(conf,pin).success(function(data){deferred.resolve(data)}).error(function(e){deferred.reject(e)}),deferred.promise},this.getPhonebook=function(){var deferred=$q.defer();return sipRest.getPhonebook().success(function(data){$rootScope.$broadcast("services.rest.phonebook",{}),deferred.resolve(data)}).error(function(e){deferred.reject(e)}),deferred.promise},this.putPassword=function(pass){var deferred=$q.defer();return sipRest.putPassword(pass).success(function(data){deferred.resolve(data)}).error(function(e){deferred.reject(e)}),deferred.promise},this.getImBot=function(){var deferred=$q.defer();return sipRest.getImBot().success(function(data){deferred.resolve(data)}).error(function(e){deferred.reject(e)}),deferred.promise},this.putImBot=function(data){var deferred=$q.defer();return sipRest.putImBot(data).success(function(data){deferred.resolve(data)}).error(function(e){deferred.reject(e)}),deferred.promise},this.getSpeeddial=function(){var deferred=$q.defer();return sipRest.getSpeeddial().success(function(data){deferred.resolve(data)}).error(function(e){deferred.reject(e)}),deferred.promise},this.putSpeeddial=function(data){var deferred=$q.defer();return sipRest.putSpeeddial(data).success(function(data){deferred.resolve(data)}).error(function(e){deferred.reject(e)}),deferred.promise},this.getContactInfo=function(){var deferred=$q.defer();return sipRest.getContactInfo().success(function(data){deferred.resolve(data)}).error(function(e){deferred.reject(e)}),deferred.promise},this.putContactInfo=function(data){var deferred=$q.defer();return sipRest.putContactInfo(data).success(function(data){deferred.resolve(data)}).error(function(e){deferred.reject(e)}),deferred.promise},this.getLogindetails=function(data){var deferred=$q.defer();return sipRest.getLogindetails().success(function(data){deferred.resolve(data)}).error(function(e){deferred.reject(e)}),deferred.promise},this.getSchedule=function(){var deferred=$q.defer();return sipRest.getSchedule().success(function(data){deferred.resolve(data)}).error(function(e){deferred.reject(e)}),deferred.promise},this.putSchedule=function(id,d){var deferred=$q.defer();return sipRest.putSchedule(id,d).success(function(data){deferred.resolve(data)}).error(function(e){deferred.reject(e)}),deferred.promise},this.postSchedule=function(d){var deferred=$q.defer();return sipRest.postSchedule(d).success(function(data){deferred.resolve(data)}).error(function(e){deferred.reject(e)}),deferred.promise},this.delSchedule=function(id){var deferred=$q.defer();return sipRest.delSchedule(id).success(function(data){deferred.resolve(data)}).error(function(e){deferred.reject(e)}),deferred.promise},this.getForward=function(){var deferred=$q.defer();return sipRest.getForward().success(function(data){deferred.resolve(data)}).error(function(e){deferred.reject(e)}),deferred.promise},this.putForward=function(d){var deferred=$q.defer();return sipRest.putForward(d).success(function(data){deferred.resolve(data)}).error(function(e){deferred.reject(e)}),deferred.promise},this.getPersonalAttendant=function(){var deferred=$q.defer();return sipRest.getPersonalAttendant().success(function(data){deferred.resolve(data)}).error(function(e){deferred.reject(e)}),deferred.promise},this.putPersonalAttendant=function(d){var deferred=$q.defer();return sipRest.putPersonalAttendant(d).success(function(data){deferred.resolve(data)}).error(function(e){deferred.reject(e)}),deferred.promise},this.getPersonalAttendantLang=function(){var deferred=$q.defer();return sipRest.getPersonalAttendantLang().success(function(data){deferred.resolve(data)}).error(function(e){deferred.reject(e)}),deferred.promise},this.getVmPrefs=function(){var deferred=$q.defer();return sipRest.getVmPrefs().success(function(data){deferred.resolve(data)}).error(function(e){deferred.reject(e)}),deferred.promise},this.putVmPrefs=function(d){var deferred=$q.defer();return sipRest.putVmPrefs(d).success(function(data){deferred.resolve(data)}).error(function(e){deferred.reject(e)}),deferred.promise},this.getKeepAlive=function(){var deferred=$q.defer();return sipRest.getKeepAlive().success(function(data){deferred.resolve(data)}).error(function(e){deferred.reject(e)}),deferred.promise},this.putVmPin=function(d){var deferred=$q.defer();return sipRest.putVmPin(d).success(function(data){deferred.resolve(data)}).error(function(e){deferred.reject(e)}),deferred.promise},this.getMohPermission=function(){var deferred=$q.defer();return sipRest.getMohPermission().success(function(data){deferred.resolve(data)}).error(function(e){deferred.reject(e)}),deferred.promise},this.getMohSettings=function(){var deferred=$q.defer();return sipRest.getMohSettings().success(function(data){deferred.resolve(data)}).error(function(e){deferred.reject(e)}),deferred.promise},this.putMohSettings=function(d){var deferred=$q.defer();return sipRest.putMohSettings(d).success(function(data){deferred.resolve(data)}).error(function(e){deferred.reject(e)}),deferred.promise},this.getMohFiles=function(){var deferred=$q.defer();return sipRest.getMohFiles().success(function(data){deferred.resolve(data)}).error(function(e){deferred.reject(e)}),deferred.promise},this.deleteMohFile=function(name){var deferred=$q.defer();return sipRest.deleteMohFile(name).success(function(data){deferred.resolve(data)}).error(function(e){deferred.reject(e)}),deferred.promise},this.listenMohFile=function(name){var deferred=$q.defer();return sipRest.listenMohFile(name).success(function(data){deferred.resolve(data)}).error(function(e){deferred.reject(e)}),deferred.promise},this.getIMproperties=function(){var deferred=$q.defer();return sipRest.getIMproperties().success(function(data){deferred.resolve(data)}).error(function(e){deferred.reject(e)}),deferred.promise},this.getAllImages=function(phonebookList){function createPromiseArray(array){var promises=[];return _.each(array,function(entry){entry["contact-information"]&&entry["contact-information"].avatar&&-1!==entry["contact-information"].avatar.indexOf("/sipxconfig/rest")?(avatarUrl=entry["contact-information"].avatar.split("/sipxconfig/rest")[1],url=CONFIG.baseRest+avatarUrl):url="",promises.push($http.get(url,{cache:!0,responseType:"arraybuffer"}))}),promises}function createObjectURL(array,values){var blob,url;array.forEach(function(el,i){_.isUndefined(values[i])||""===values[i].config.url?""===values[i].config.url&&(array[i].avatar=sharedFactory.defaultImg):(blob=new Blob([values[i].data],{type:"image/png"}),url=window.URL.createObjectURL(blob),array[i].avatar=url)})}var promises=createPromiseArray(phonebookList),avatarUrl="",url="";$q.all(promises).then(function(responses){createObjectURL(phonebookList,responses)})["catch"](function(err){console.log(err)})},this.getCallHistory=function(){var deferred=$q.defer();return sipRest.getCallHistory().success(function(data){parseXml(data,function(parsed){deferred.resolve(parsed)})}).error(function(e){deferred.reject(e)}),deferred.promise}}])}(),function(){"use strict";uw.service("uiService",["$rootScope","$interval","$sce","sharedFactory","restService","_","CONFIG",function($rootScope,$interval,$sce,sharedFactory,restService,_,CONFIG){var activityList={main:null},rosterList={main:null,noGroups:null},search={t:""},timers={all:{}},groupChat={modal:!1},ui={root:{templates:sharedFactory.settings.mainMenu,template:sharedFactory.settings.mainMenu[1],oldTemplate:sharedFactory.settings.mainMenu[1]},groupChat:{showModal:function(){groupChat.modal=!groupChat.modal},hideModal:function(){groupChat.modal=!groupChat.modal,groupChat.serverRooms=null}},activityList:{selectConversation:function(){},removeConversation:function(entry){var spliceFromActiList=function(){_.find(activityList.main,function(obj){return obj.jid===entry.jid?(activityList.main.splice(_.indexOf(activityList.main,obj),1),sharedFactory.saveConversationList(angular.copy(activityList.main)),!0):void 0})};spliceFromActiList(),sharedFactory.delContactMessageList(entry.jid)}}},secondary={template:{main:ui.root.templates[ui.root.templates.length-1]},logout:{init:function(){window.location.assign("/sipxconfig/rest/my/logindetailsunite/logout")}},chat:{showDefault:function(){util.changeView(ui.root.templates[9]),secondary.conference.participants=[],secondary.voicemail.messages=[],secondary.voicemail.folder={},secondary.conference.active=!1,secondary.conference.timers.cancelAll(!0),$rootScope.leftSideView=""}},voicemail:{messages:[],backup:[],folder:{},tooltip:{refresh:{title:"Refresh",checked:!1},download:{title:"Download",checked:!1},trash:{title:"Trash",checked:!1}},folders:[{name:"inbox"},{name:"saved"},{name:"deleted"},{name:"conference"}],moveVoicemail:{},init:function(){var temp;secondary.voicemail.messages=null,secondary.voicemail.messages=[],secondary.voicemail.backup=[],_.isEmpty(secondary.voicemail.folder)?restService.getMessages("inbox").then(function(messages){var msgs={};_.map(messages,function(message){msgs[message.id]=message}),secondary.voicemail.messages=angular.copy(msgs),secondary.voicemail.folder=secondary.voicemail.folders[0],secondary.voicemail.backup=angular.copy(secondary.voicemail.messages)},function(er){console.log(er)}):(temp="all"===secondary.voicemail.folder.name?"messages":angular.copy(secondary.voicemail.folder.name),restService.getMessages(temp).then(function(messages){var msgs={};_.map(messages,function(message){msgs[message.id]=message}),secondary.voicemail.messages=angular.copy(msgs),secondary.voicemail.backup=angular.copy(secondary.voicemail.messages)}))},changeFolder:function(){var folder=secondary.voicemail.folder.name;"all"===folder&&(folder="messages"),secondary.voicemail.messages=null,restService.getMessages(folder).then(function(messages){var msgs={};_.map(messages,function(message){msgs[message.id]=message}),secondary.voicemail.messages=angular.copy(msgs),secondary.voicemail.backup=angular.copy(secondary.voicemail.messages)},function(er){console.log(er)})},getMessage:function(id,index){var bId=angular.copy(id);angular.copy(index),secondary.voicemail.messages[bId].loading=!0,restService.getMessage(bId).then(function(url){return secondary.voicemail.messages[bId].href=$sce.trustAsResourceUrl(CONFIG.baseRest+"/my/redirect/media/"+restService.cred.user+"/inbox/"+id),delete secondary.voicemail.messages[bId].loading,restService.heardMessage(bId)}).then(function(){return restService.getHeardMessage(bId)}).then(function(){secondary.voicemail.messages[bId].heard=!0,delete secondary.voicemail.messages[bId].loading})},delMessage:function(id,index){var bId=angular.copy(id);angular.copy(index),secondary.voicemail.messages[bId].loading=!0,"deleted"===secondary.voicemail.folder.name?restService.delMessage(bId).then(function(){delete secondary.voicemail.messages[bId]},function(er){console.log(er)}):restService.putMoveMsg(id,"deleted").then(function(){delete secondary.voicemail.messages[bId]},function(er){console.log(er)})},moveMessage:function(id,index){var bId=angular.copy(id),folder=(angular.copy(index),angular.copy(secondary.voicemail.moveVoicemail[bId]));secondary.voicemail.messages[bId].loading=!0,"deleted"===folder.name&&(secondary.voicemail.messages[bId].href=""),restService.putMoveMsg(id,folder.name).then(function(){secondary.voicemail.moveVoicemail={},secondary.voicemail.messages[bId].loading=!1,delete secondary.voicemail.messages[bId]})["catch"](function(err){console.log(err),secondary.voicemail.messages[bId].loading=!1})},changeSubject:function(index){var subject=angular.copy(secondary.voicemail.messages[index].subject),id=angular.copy(secondary.voicemail.messages[index].id);secondary.voicemail.messages[index].loading=!0,restService.putSubjectMessage(id,subject).then(function(){secondary.voicemail.messages[index].loading=!1})["catch"](function(err){console.log(err),secondary.voicemail.messages[index].loading=!1})},cancelChangeSubject:function(index){secondary.voicemail.messages[index]=angular.copy(secondary.voicemail.backup[index])},isEmpty:function(){for(var key in secondary.voicemail.messages)if(secondary.voicemail.messages.hasOwnProperty(key))return!1;return!0},mp3Ie:function(audioFormat){return"mp3"===audioFormat?!0:-1!==window.navigator.userAgent.indexOf("MSIE ")||-1!==window.navigator.userAgent.indexOf("Trident/")||navigator.userAgent.match(/Version\/[\d\.]+.*Safari/)?!1:!0}},callhistory:{startTime:"2010-11-01T10:00",endTime:"2016-11-01T12:00",calls:[],number:null,availableOptions:[{id:"1",name:"- all -"},{id:"2",name:"From"},{id:"3",name:"To"},{id:"4",name:"From or To"}],selectedOption:{id:"1",name:"- all -"},apply:function(){secondary.callhistory.calls=[],restService.getCallHistory().then(function(data){for(var endDate=new Date(secondary.callhistory.endTime.split("T").join(" ")),startDate=new Date(secondary.callhistory.startTime.split("T").join(" ")),i=0;i<data.length;i++){var date=new Date(data[i].start);date.getTime()<endDate.getTime()&&date.getTime()>startDate.getTime()&&("- all -"===secondary.callhistory.selectedOption.name?(data[i].from=data[i].from.replace(/\<.*/,""),data[i].to=data[i].to.replace(/\<.*/,""),secondary.callhistory.calls.push(data[i])):"From"===secondary.callhistory.selectedOption.name?data[i].from.indexOf(secondary.callhistory.number.toString())>-1&&(data[i].from=data[i].from.replace(/\<.*/,""),data[i].to=data[i].to.replace(/\<.*/,""),secondary.callhistory.calls.push(data[i])):"To"===secondary.callhistory.selectedOption.name?data[i].to.indexOf(secondary.callhistory.number.toString())>-1&&(data[i].from=data[i].from.replace(/\<.*/,""),data[i].to=data[i].to.replace(/\<.*/,""),secondary.callhistory.calls.push(data[i])):(data[i].from.indexOf(secondary.callhistory.number.toString())>-1||data[i].to.indexOf(secondary.callhistory.number.toString())>-1)&&(data[i].from=data[i].from.replace(/\<.*/,""),data[i].to=data[i].to.replace(/\<.*/,""),secondary.callhistory.calls.push(data[i])))}},function(err){console.log(err)})}},conference:{rooms:null,select:null,active:null,refresh:null,status:null,pin:null,err:null,btnDisabled:!1,participants:[],tooltip:{title:"Refresh",checked:!0},init:function(){secondary.conference.err||(secondary.conference.rooms=null,secondary.conference.err=null),secondary.conference.status="Searching for conference rooms...",secondary.conference.refresh=null,restService.getConfList().then(function(data){return _.isEmpty(data.conferences)?(secondary.conference.status="No conference rooms found. ",secondary.conference.err=!0,void(ui.root.templates[2].show=!1)):(secondary.conference.err=null,secondary.conference.rooms=data.conferences,secondary.conference.select=secondary.conference.rooms[0],secondary.conference.status="Waiting for an active conference room...",void secondary.conference.timers.start("confActive"))})["catch"](function(er){ui.root.templates[2].show=!1,secondary.conference.status="Error!",console.log(er)})},changeRoom:function(){console.log(secondary.conference.select)},moveHere:function(item){var entry=angular.copy(item),uniq=_.find(secondary.conference.participants,function(part){return part.name===entry.name?!0:void 0});if(_.isUndefined(uniq)){var intern,confName=angular.copy(secondary.conference.select.name);return secondary.conference.active?(intern=entry.number,secondary.conference.participants.push(entry),void restService.putConfInvite(confName,intern).then(function(data){console.log(data)},function(er){console.log(er)})):void secondary.conference.participants.push(entry)}},remove:function(index){secondary.conference.participants.splice(angular.copy(index),1)},call:function(){var confName=angular.copy(secondary.conference.select.name);secondary.conference.active?(secondary.conference.status="Kicking participants & hanging up...",secondary.conference.btnDisabled=!0,restService.getConfKick(confName,"all").then(function(){secondary.conference.status="Kicking participants & hanging up...",secondary.conference.active=!1,secondary.conference.btnDisabled=!1,_.each(secondary.conference.participants,function(part){part.conf&&(part.conf.active=null)})},function(er){console.log(er)})):(secondary.conference.status="Calling...",_.each(secondary.conference.participants,function(item){restService.putConfInvite(confName,item.number||item.name).then(function(){},function(er){console.log(er)})}),secondary.conference.status="Call in progress...",secondary.conference.btnDisabled=!0,secondary.conference.timers.start("confActive"))},mute:function(item){var confName=angular.copy(secondary.conference.select.name),entry=angular.copy(item),getConfMute=function(conf,id){restService.getConfMute(conf,id).then(function(data){console.log(data)},function(er){console.log(er)})},getConfUnmute=function(conf,id){restService.getConfUnmute(conf,id).then(function(data){console.log(data)},function(er){console.log(er)})};entry.conf.canSpeak?getConfMute(confName,entry.conf.id):getConfUnmute(confName,entry.conf.id)},deaf:function(item){var confName=angular.copy(secondary.conference.select.name),entry=angular.copy(item),getConfDeaf=function(conf,id){restService.getConfDeaf(conf,id).then(function(data){console.log(data)},function(er){console.log(er)})},getConfUndeaf=function(conf,id){restService.getConfUndeaf(conf,id).then(function(data){console.log(data)},function(er){console.log(er)})};entry.conf.canHear?getConfDeaf(confName,entry.conf.id):getConfUndeaf(confName,entry.conf.id)},keyPress:function(e){46===e.keyCode||8===e.keyCode||(e.keyCode<48||e.keyCode>57)&&secondary.conference.pin.length>6&&e.preventDefault()},kick:function(item){var confName=angular.copy(secondary.conference.select.name),entry=angular.copy(item);restService.getConfKick(confName,entry.conf.id).then(function(){item.conf.active=null},function(er){console.log(er)})},timers:{all:{},maxTimeouts:20,currentTimeouts:0,start:function(type){var conf,exists,found,interval,backup={};switch(type){case"confActive":secondary.conference.refresh=null,timers.all.confActive||(timers.all.confActive=[]),interval=$interval(function(){restService.getConfPartList(secondary.conference.select.name).then(function(data){_.isEmpty(backup)||_.each(_.filter(backup,function(obj){return!_.findWhere(data.conference.members,obj)}),function(obj){_.find(secondary.conference.participants,function(part){return part.profile&&part.profile.vCard&&obj.name.toString()===part.profile.vCard["X-INTERN"]||part.name===obj.imdId||part.imId===obj.name||part.imId===obj.imId?(part.conf.active=null,!0):void 0})}),backup=data.conference.members,null!==data?(secondary.conference.status="Call in progress...",_.each(data.conference.members,function(member){conf={id:member.id,canHear:member.canHear,canSpeak:member.canSpeak,muteDetect:member.muteDetect,active:!0},exists=_.find(secondary.conference.participants,function(part){return part.number&&part.number.toString()===member.name.toString()||part.name&&part.name.toString()===member.name.toString()?(part.conf=conf,!0):void(part.conf.active=null)}),exists||(found=_.find(restService.phonebook,function(item){return member.name.toString()===item.number?(_.extend(item,{conf:conf}),secondary.conference.participants.push(item),!0):void 0}),found||secondary.conference.participants.push({name:member.imId||member.name,conf:conf}))}),secondary.conference.active=!0,secondary.conference.btnDisabled=!1):(secondary.conference.status="Waiting for an active conference room...",secondary.conference.active=!1,secondary.conference.btnDisabled=!1,_.each(secondary.conference.participants,function(part){part.conf&&(part.conf.active=null)}),secondary.conference.timers.cancelAll())})["catch"](function(){secondary.conference.status="Waiting for an active conference room...",secondary.conference.active=!1,secondary.conference.btnDisabled=!1,_.each(secondary.conference.participants,function(part){part.conf&&(part.conf.active=null)}),secondary.conference.timers.cancelAll()})},1e4),timers.all.confActive.push(interval)}},cancelAll:function(force){var stopTimers=function(){var keys=Object.keys(timers.all);_.each(keys,function(key){-1!==key.indexOf("conf")&&_.each(timers.all[key],function(timer){$interval.cancel(timer)})}),secondary.conference.refresh=!0,secondary.conference.timers.currentTimeouts=0,secondary.conference.status="No active conference rooms found. "};return force?void stopTimers():secondary.conference.timers.currentTimeouts<secondary.conference.timers.maxTimeouts?void secondary.conference.timers.currentTimeouts++:void stopTimers()}}},settings:{personalAttendant:{main:null,showNew:!1,numbers:["1","2","3","4","5","6","7","8","9"],emptyArr:[],lang:["Default"],init:function(){secondary.settings.errors.notAvailable=null,restService.getPersonalAttendant().then(function(data){null===data.language&&(data.language="Default"),secondary.settings.personalAttendant.lang=["Default"],secondary.settings.personalAttendant.main=data,secondary.settings.success=!1,secondary.settings.warning=!1,restService.getPersonalAttendantLang().then(function(data){secondary.settings.personalAttendant.lang=secondary.settings.personalAttendant.lang.concat(data)})})["catch"](function(){secondary.settings.errors.notAvailable=!0})},rem:function(d,i,key){d.length?d.splice(i,1):delete d[key]},add:function(){var obj={no:"",key:""};secondary.settings.personalAttendant.showNew=!0,secondary.settings.personalAttendant.emptyArr.push(obj)},save:function(formPa){var main=angular.copy(secondary.settings.personalAttendant.main),arr=angular.copy(secondary.settings.personalAttendant.emptyArr);"Default"===main.language&&(main.language=null),secondary.settings.personalAttendant.showNew=!1,arr.length>0&&_.each(arr,function(obj){main.menu[obj.key]=obj.no}),secondary.settings.personalAttendant.emptyArr=[],secondary.settings.loading=!0,restService.putPersonalAttendant(angular.copy(main)).then(function(){secondary.settings.success=!0,secondary.settings.loading=!1,formPa.$setPristine(),secondary.settings.personalAttendant.init()})["catch"](function(err){secondary.settings.success=!1,secondary.settings.warning=err.toString(),secondary.settings.loading=!1})},cancel:function(){secondary.settings.personalAttendant.main=null,secondary.settings.personalAttendant.emptyArr=[],secondary.settings.personalAttendant.init()}},fwd:{visible:"setup",show:function(name){switch(secondary.settings.fwd.visible=name,name){case"setup":secondary.settings.fwd.setup.init();break;case"schedule":secondary.settings.fwd.sched.init()}},setup:{resp:null,selected:null,showEmpty:!1,custom:[],defaultSchedules:[null],defaultTypes:["At the same time","If no response"],"default":{expiration:"",type:"At the same time",enabled:"",number:""},init:function(){secondary.settings.fwd.setup.resp=null,secondary.settings.success=!1,secondary.settings.warning=!1,secondary.settings.fwd.setup.showEmpty=!1,secondary.settings.errors.notAvailable=null,secondary.settings.fwd.setup.defaultSchedules=[null],secondary.settings.fwd.visible="setup",restService.getForward().then(function(data){return secondary.settings.fwd.setup.resp=data,restService.getSchedule()}).then(function(data){secondary.settings.fwd.sched.main=data,_.each(data,function(obj){secondary.settings.fwd.setup.defaultSchedules.push(obj.scheduleId),secondary.settings.fwd.setup.defaultSchedules=_.uniq(secondary.settings.fwd.setup.defaultSchedules)})})["catch"](function(){secondary.settings.errors.notAvailable=!0})},add:function(){secondary.settings.fwd.setup.showEmpty=!0,secondary.settings.fwd.setup.resp.rings.push(angular.copy(secondary.settings.fwd.setup["default"]))},rem:function(d,i){d.splice(i,1)},moveRing:function(from,to){function arrayMove(arrayVar,from,to){arrayVar.splice(to,0,arrayVar.splice(from,1)[0])}-1!==to&&arrayMove(secondary.settings.fwd.setup.resp.rings,from,to)},save:function(formSetup){secondary.settings.success=!1,secondary.settings.warning=!1,secondary.settings.loading=!0,restService.putForward(angular.copy(secondary.settings.fwd.setup.resp)).then(function(data){secondary.settings.loading=!1,secondary.settings.success=!0,formSetup.$setPristine()},function(err){secondary.settings.loading=!1,secondary.settings.warning=!0})},cancel:function(){secondary.settings.fwd.setup.custom=[],secondary.settings.fwd.setup.showEmpty=!1,secondary.settings.fwd.setup.init()}},sched:{backup:null,showNew:!1,remArray:[],main:null,selected:null,predefined:[-2,-1,0,1,2,3,4,5,6,7],showNewEmpty:{name:"",description:"",periods:[{end:"",start:"",scheduledDay:""}],scheduleId:""},init:function(){secondary.settings.errors.notAvailable=null,restService.getSchedule().then(function(data){secondary.settings.fwd.sched.convertTimeTo(data,"normal"),secondary.settings.fwd.sched.backup=angular.copy(data),secondary.settings.fwd.sched.main=data,secondary.settings.fwd.sched.selected=secondary.settings.fwd.sched.main[0]})["catch"](function(){secondary.settings.errors.notAvailable=!0})},add:function(to){to.periods.push({end:"",start:"",scheduledDay:-2})},rem:function(to,index){to.periods.splice(index,1)},remSelected:function(){var selected=angular.copy(secondary.settings.fwd.sched.selected);secondary.settings.fwd.sched.remArray.push(selected.scheduleId),secondary.settings.fwd.sched.main=_.filter(angular.copy(secondary.settings.fwd.sched.main),function(obj){return obj.name!==selected.name}),secondary.settings.fwd.sched.selected=secondary.settings.fwd.sched.main[0]},addNew:function(){function postSchedule(schedule){restService.postSchedule(schedule).then(function(data){return restService.getSchedule()}).then(function(data){_.find(data,function(o){return schedule.name===o.name?(schedule.scheduleId=o.scheduleId,!0):void 0}),secondary.settings.fwd.sched.convertTimeTo(data,"normal"),secondary.settings.fwd.sched.backup=angular.copy(data),secondary.settings.fwd.sched.main=data,secondary.settings.fwd.sched.selected=secondary.settings.fwd.sched.main[0]})["catch"](function(err){console.log(err)})}var schedule={};secondary.settings.fwd.sched.showNew?(schedule=angular.copy(secondary.settings.fwd.sched.showNewEmpty),secondary.settings.fwd.sched.main.push(schedule),secondary.settings.fwd.sched.showNew=!1,secondary.settings.fwd.sched.convertTimeTo(schedule,"sep"),postSchedule(schedule)):secondary.settings.fwd.sched.showNew=!0},hideNewEmpty:function(){secondary.settings.fwd.sched.showNew=!1,secondary.settings.fwd.sched.remArray=[],secondary.settings.fwd.sched.showNewEmpty={name:"",description:"",periods:[{end:"",start:"",scheduledDay:""}]}},convertTimeTo:function(mainArr,type){switch(type){case"normal":return"object"==typeof mainArr&&mainArr.periods?_.each(mainArr.periods,function(time){time.end=time.end.hrs+":"+(time.end.min>-1&&time.end.min<10?"0"+time.end.min:time.end.min),time.start=time.start.hrs+":"+(time.start.min>-1&&time.start.min<10?"0"+time.start.min:time.start.min)}):_.each(mainArr,function(obj){_.each(obj.periods,function(time){time.end=time.end.hrs+":"+(time.end.min>-1&&time.end.min<10?"0"+time.end.min:time.end.min),time.start=time.start.hrs+":"+(time.start.min>-1&&time.start.min<10?"0"+time.start.min:time.start.min)})}),mainArr;case"sep":return"object"==typeof mainArr&&mainArr.periods?_.each(mainArr.periods,function(time){time.end={hrs:time.end.split(":")[0],min:time.end.split(":")[1]},time.start={hrs:time.start.split(":")[0],min:time.start.split(":")[1]}}):_.each(mainArr,function(obj){_.each(obj.periods,function(time){time.end={hrs:time.end.split(":")[0],min:time.end.split(":")[1]},time.start={hrs:time.start.split(":")[0],min:time.start.split(":")[1]}})}),mainArr}},save:function(formSched){var main=angular.copy(secondary.settings.fwd.sched.main),rem=angular.copy(secondary.settings.fwd.sched.remArray);secondary.settings.fwd.sched.convertTimeTo(main,"sep"),secondary.settings.success=!1,secondary.settings.warning=!1,secondary.settings.loading=!0,main.length>0&&_.each(main,function(obj){""!==obj.scheduleId?restService.putSchedule(obj.scheduleId,obj).then(function(data){secondary.settings.loading=!1,secondary.settings.success=!0;
},function(err){secondary.settings.loading=!1,secondary.settings.warning=!0,console.log(err)}):restService.postSchedule(obj).then(function(data){return secondary.settings.loading=!1,secondary.settings.success=!0,formSched.$setPristine(),restService.getSchedule()}).then(function(data){_.find(data,function(o){return obj.name===o.name?(obj.scheduleId=o.scheduleId,!0):void 0})})["catch"](function(err){secondary.settings.loading=!1,secondary.settings.warning=!0,console.log(err)})}),rem.length>0&&_.each(rem,function(sched){restService.delSchedule(sched).then(function(data){secondary.settings.loading=!1,secondary.settings.success=!0,formSched.$setPristine()},function(err){secondary.settings.loading=!1,secondary.settings.warning=!0})})},cancel:function(){secondary.settings.fwd.sched.showNew=!1,secondary.settings.fwd.sched.main=null,secondary.settings.fwd.sched.init()}}},speed:{data:null,init:function(){secondary.settings.errors.notAvailable=null,restService.getSpeeddial().then(function(data){secondary.settings.speed.data=data})["catch"](function(){secondary.settings.errors.notAvailable=!0})},removeEntry:function(index){secondary.settings.speed.data.buttons.splice(index,1)},addEntry:function(){var obj={number:"",label:"",blf:!1};secondary.settings.speed.data.buttons.push(obj)},move:function(from,to){function arrayMove(arrayVar,from,to){arrayVar.splice(to,0,arrayVar.splice(from,1)[0])}-1!==to&&arrayMove(secondary.settings.speed.data.buttons,from,to)},save:function(formSpeed,updatePhones){var data=angular.copy(secondary.settings.speed.data);updatePhones&&(data.updatePhones=!0),secondary.settings.loading=!0,secondary.settings.success=!1,secondary.settings.warning=!1,restService.putSpeeddial(data).then(function(data){secondary.settings.success=!0,formSpeed.$setPristine(),restService.getSpeeddial().then(function(data){secondary.settings.loading=null,secondary.settings.speed.data=data},function(err){secondary.settings.loading=null,console.log(err)})},function(err){secondary.settings.warning=!0,secondary.settings.loading=null,console.log(err)})},cancel:function(){secondary.settings.speed.init()}},user:{pass:"",loading:null,buddy:null,success:!1,warning:!1,vm:{main:null,selected:null,pass:null,select:[{name:"Default system",val:"NONE"},{name:"Standard",val:"STANDARD"},{name:"Out of office",val:"OUT_OF_OFFICE"},{name:"Extended absence",val:"EXTENDED_ABSENCE"}]},moh:{audioData:null,addMoh:function(name){var size=secondary.settings.user.moh.selectMoh.length;secondary.settings.user.moh.selectMoh[size]={name:name.file.name,value:name.file.name}},deleteMoh:function(){restService.deleteMohFile(secondary.settings.user.moh.selectedMoh.name).then(function(){for(var index=0,i=0;i<secondary.settings.user.moh.selectMoh.length;i++)secondary.settings.user.moh.selectMoh[i].name===secondary.settings.user.moh.selectedMoh.name&&(index=i);index>0&&secondary.settings.user.moh.selectMoh.splice(index,1),secondary.settings.user.moh.selectedMoh=secondary.settings.user.moh.selectMoh[0]})["catch"](function(err){console.log("error delete MoH file error")})},listenMoh:function(){restService.listenMohFile(secondary.settings.user.moh.selectedMoh.name).then(function(data){window.open("/sipxconfig/api/my/moh/prompts/"+secondary.settings.user.moh.selectedMoh.name+"/stream","_blank")})["catch"](function(err){console.log("error listen MoH file error")})},selected:null,select:[{name:"Group Music Directory",val:"GROUP_FILES_SRC"},{name:"Personal Music Directory",val:"PERSONAL_FILES_SRC"},{name:"Use System Configuration",val:"SYSTEM_DEFAULT"},{name:"System Music Directory",val:"FILES_SRC"},{name:"None",val:"NONE"},{name:"Sound Card",val:"SOUNDCARD_SRC"}],selectedMoh:null,selectMoh:[{name:"Select...",val:"NONE"}]},conf:{main:null,changeConf:function(){var name=angular.copy(secondary.settings.user.conf.selected.name);restService.getConfSettings(name).then(function(data){secondary.settings.user.conf.main=data.setting})["catch"](function(err){secondary.settings.errors.myBuddy=!0})}},init:function(){function setVmSelected(){var i=0,greeting=angular.copy(secondary.settings.user.vm.main.greeting);for(i=0;i<secondary.settings.user.vm.select.length;i++)greeting===secondary.settings.user.vm.select[i].val&&(secondary.settings.user.vm.selected=secondary.settings.user.vm.select[i])}function setMohSettingsSelected(data){var i=0;for(i=0;i<secondary.settings.user.moh.select.length;i++)data.value===secondary.settings.user.moh.select[i].val&&(secondary.settings.user.moh.selected=secondary.settings.user.moh.select[i])}function setMohFilesSelect(data){var i=0;for(i=0;i<data.files.length;i++)secondary.settings.user.moh.selectMoh[i+1]={name:data.files[i].name,val:data.files[i].name};secondary.settings.user.moh.selectedMoh=secondary.settings.user.moh.selectMoh[0]}secondary.settings.errors.notAvailable=null,secondary.settings.errors.myBuddy=null,secondary.settings.errors.voicemail=null,secondary.settings.errors.confBridge=null,secondary.settings.errors.moh=null,restService.getImBot().then(function(data){secondary.settings.user.buddy=data})["catch"](function(err){secondary.settings.errors.myBuddy=!0}),restService.getVmPrefs().then(function(data){secondary.settings.user.vm.main=data,setVmSelected()})["catch"](function(err){secondary.settings.errors.voicemail=!0}),restService.getConfList().then(function(data){return data.conferences&&0===data.conferences.length?void(secondary.settings.errors.confBridge=!0):(secondary.settings.user.conf.select=data.conferences,secondary.settings.user.conf.selected=secondary.settings.user.conf.select[0],void secondary.settings.user.conf.changeConf())})["catch"](function(err){secondary.settings.errors.confBridge=!0}),restService.getMohPermission().then(function(data){"false"==data?secondary.settings.errors.moh=!0:secondary.settings.errors.moh=!1})["catch"](function(err){secondary.settings.errors.moh=!0}),restService.getMohSettings().then(function(data){setMohSettingsSelected(data)})["catch"](function(err){console.log(err)}),restService.getMohFiles().then(function(data){setMohFilesSelect(data)})["catch"](function(err){console.log(err)})},save:function(formUserSettings){function savePassword(){var pass=angular.copy(secondary.settings.user.pass);if(0!==pass.length){if(pass.length<8)return void(secondary.settings.user.errors.pass=!0);secondary.settings.user.loading=!0,restService.putPassword(pass).then(function(data){secondary.settings.user.loading=null},function(err){console.log(err)})}}function saveImBot(){var buddy=angular.copy(secondary.settings.user.buddy);secondary.settings.user.loading=!0,restService.putImBot(buddy).then(function(data){restService.getImBot().then(function(data){secondary.settings.user.loading=null,secondary.settings.user.buddy=data},function(err){secondary.settings.user.loading=null,console.log(err)})},function(err){secondary.settings.user.loading=null,console.log(err)})}function saveVm(){secondary.settings.user.vm.main.email&&(secondary.settings.user.vm.main.emailAttachType="YES",secondary.settings.user.vm.main.emailFormat="FULL"),secondary.settings.user.vm.main.altEmail&&(secondary.settings.user.vm.main.altEmailAttachType="YES",secondary.settings.user.vm.main.altEmailFormat="FULL"),secondary.settings.user.vm.main.greeting=secondary.settings.user.vm.selected.val,restService.putVmPrefs(angular.copy(secondary.settings.user.vm.main))["catch"](function(err){console.log(err)})}function saveMoh(){restService.putMohSettings(angular.copy(secondary.settings.user.moh.selected.val))["catch"](function(err){console.log(err)})}function saveConf(){var data=angular.copy(secondary.settings.user.conf.main),conf=angular.copy(secondary.settings.user.conf.selected.name);restService.putConfSettings(conf,{setting:data})["catch"](function(err){console.log(err)})}function saveVmPass(){if(null!==secondary.settings.user.vm.pass){var pass=angular.copy(secondary.settings.user.vm.pass);restService.putVmPin(pass)["catch"](function(err){console.log(err)})}}savePassword(),saveImBot(),saveVm(),saveVmPass(),1!=secondary.settings.errors.moh&&saveMoh(),1!=secondary.settings.errors.confBridge&&saveConf(),formUserSettings.$setPristine()},cancel:function(){secondary.settings.user.init()},errors:{pass:null}},errors:{notAvailable:!1,voicemail:!1,confBridge:!1,myBuddy:!1}},profile:{imageData:null,info:null,util:{success:null,failure:null,loading:null},init:function(){secondary.profile.uploadAvatar=!1,secondary.profile.info=null,secondary.profile.util.success=null,secondary.profile.util.failure=null,secondary.profile.util.loading=null,restService.getContactInfo().then(function(data){secondary.profile.info=angular.copy(secondary.profile["default"]),secondary.profile.info.profile=util.deepExtend(angular.copy(secondary.profile.info.profile),data["contact-information"])},function(err){console.log(err)})},save:function(){var info={"contact-information":util.deepRemoveEmpty(angular.copy(secondary.profile.info.profile))};secondary.profile.util.loading=!0,null!=secondary.profile.imageData&&(secondary.profile.imageData.upload(),secondary.profile.imageData=null),restService.putContactInfo(info).then(function(data){secondary.profile.util.loading=!1,secondary.profile.util.success=!0,secondary.profile.uploadAvatar=!1,setTimeout(function(){secondary.profile.util.success=!1},1e3)},function(err){secondary.profile.util.loading=!1,secondary.profile.util.failure=!0,console.log(err)})},"default":{name:null,location:null,photoSrc:null,uploadAvatar:!1,profile:{alternateEmailAddress:"",alternateImId:"",assistantName:"",assistantPhoneNumber:"",cellPhoneNumber:"",companyName:"",didNumber:"",emailAddress:"",facebookName:"",faxNumber:"",firstName:"",homeAddress:{street:"",city:"",state:"",country:"",zip:""},homePhoneNumber:"",imDisplayName:"",imId:"",jobDept:"",jobTitle:"",lastName:"",linkedinName:"",location:"",officeAddress:{street:"",city:"",state:"",country:"",zip:"",officeDesignation:""},twiterName:"",useBranchAddress:"",xingName:""}}}},util={openChat:null,populateContactList:function(){rosterList.main=restService.phonebook,activityList.main=restService.activityList,restService.getAllImages(rosterList.main),$interval(function(){restService.getKeepAlive()},6e5)},deepRemoveEmpty:function(source){var destination={};for(var property in source)_.isEmpty(source[property])||(source.hasOwnProperty(property)&&"object"==typeof source[property]?(destination[property]=source[property]||{},util.deepRemoveEmpty(source[property])):destination[property]=source[property]);return destination},deepExtend:function(destination,source){for(var property in source)source[property]&&"object"==typeof source[property]?(destination[property]=destination[property]||{},util.deepExtend(destination[property],source[property])):destination[property]=source[property];return destination},changeView:function(view){view.type?(secondary.template.main=view,secondary.voicemail.messages=[],secondary.conference.participants=[],secondary.conference.active=!1,secondary.conference.timers.cancelAll(!0),secondary[view.fn]&&secondary[view.fn].init&&secondary[view.fn].init(),$rootScope.leftSideView="hide-me"):(ui.root.oldTemplate.name!==view.name&&(ui.root.oldTemplate=angular.copy(ui.root.template)),ui.root.template=view)}};return{ui:ui,secondary:secondary,util:util,rosterList:rosterList,activityList:activityList,groupChat:groupChat,search:search}}])}(),function(){"use strict";uw.controller("loginController",["$rootScope","$scope","$location","$cookieStore","restService","uiService","CONFIG",function($rootScope,$scope,$location,$cookieStore,restService,uiService,CONFIG){function onCannotConnect(){$scope.$apply(function(){$scope.error="Cannot connect",$scope.info=null})}function onInvalidCredentials(){$scope.$apply(function(){$scope.error="Invalid credentials",$scope.info=null})}function onConnect(){if($scope.remember){var auth=Base64.encode($scope.username+":"+$scope.password);$cookieStore.put(authCookie,auth)}$location.path("/main")}var authCookie=CONFIG.authCookie,auth=$cookieStore.get(authCookie);if($scope.error=null,$scope.info=null,$scope.username=null,$scope.password=null,$scope.remember=!1,$location.search().unitexmppbind&&$location.search().unitexmppdomain&&$location.search().uniterestbase&&$location.search().uniteusername&&$location.search().unitepassword&&(CONFIG.httpBindUrl=$location.search().unitexmppbind,CONFIG.domain=$location.search().unitexmppdomain,CONFIG.baseRest=$location.search().uniterestbase,$scope.info="Connecting...",$scope.error=null,$scope.username=$location.search().uniteusername,$scope.password=$location.search().unitepassword),$scope.submit=function(){var user=angular.copy($scope.username),pass=angular.copy($scope.password);$scope.info="Connecting...",$scope.error=null,_.isEmpty(user)||_.isEmpty(pass)?($scope.info=null,$scope.error="Invalid credentials"):(restService.updateCredentials(angular.copy($scope.username),angular.copy($scope.password)),restService.getPhonebook().then(function(data){if($scope.remember){var auth=Base64.encode(user+":"+pass);$cookieStore.put(authCookie,auth)}restService.connected=!0,restService.phonebook=data.phonebook,restService.phonebook.forEach(function(el,i){restService.phonebook[i].name=restService.phonebook[i]["contact-information"].imDisplayName||restService.phonebook[i]["first-name"]+" "+restService.phonebook[i]["last-name"]}),uiService.util.populateContactList(),$location.path("/main")})["catch"](function(er){$scope.info=null,$scope.error="Invalid credentials",console.log(er)}))},$scope.$on("services.chat.error",onCannotConnect),$scope.$on("services.chat.connfail",onCannotConnect),$scope.$on("services.chat.authfail",onInvalidCredentials),$scope.$on("services.chat.connected",onConnect),auth){var arr=Base64.decode(auth).split(":");$scope.username=arr[0],$scope.password=arr[1],$scope.info="Connecting...",$scope.error=null,$scope.remember=!0,restService.updateCredentials(angular.copy($scope.username),angular.copy($scope.password)),restService.getPhonebook().then(function(data){if($scope.remember){var auth=Base64.encode(angular.copy($scope.username)+":"+angular.copy($scope.password));$cookieStore.put(authCookie,auth)}restService.connected=!0,restService.phonebook=data.phonebook,restService.phonebook.forEach(function(el,i){restService.phonebook[i].name=restService.phonebook[i]["contact-information"].imDisplayName||restService.phonebook[i]["first-name"]+" "+restService.phonebook[i]["last-name"]}),uiService.util.populateContactList(),$location.path("/main")})["catch"](function(){$scope.info=null,$scope.error="Invalid credentials"})}}])}(),function(){"use strict";uw.controller("profile",["$sce","$rootScope","$scope","$interval","$timeout","uiService","restService","sharedFactory",function($sce,$rootScope,$scope,$interval,$timeout,uiService,restService,sharedFactory){var templates=sharedFactory.settings.miniTemplates;restService.cred,$scope.callhistory=uiService.secondary.callhistory;var timeout,interval,sipMessages=["",{100:"Trying",101:"Dialogue Establishment",180:"Ringing",181:"Call is Being Forwarded",182:"Queued",183:"Session in Progress",199:"Early Dialog Terminated"},{200:"Answered",202:"Accepted",204:"No Notification"},{300:"Multiple Choices",301:"Moved Permanently",302:"Moved Temporarily",305:"Use Proxy",380:"Alternative Service"},{400:"Bad Request",401:"Unauthorized",402:"Payment Required",403:"Forbidden",404:"Number Not Found",405:"Method Not Allowed",406:"Not Acceptable",407:"Proxy Authentication Required",408:"Call Timeout",409:"Conflict",410:"Gone",411:"Length Required",412:"Conditional Request Failed",413:"Request Entity Too Large",414:"Request-URI Too Long",415:"Unsupported Media Type",416:"Unsupported URI Scheme",417:"Unknown Resource-Priority",420:"Bad Extension",421:"Extension Required",422:"Session Interval Too Small",423:"Interval Too Brief",424:"Bad Location Information",428:"Use Identity Header",429:"Provide Referrer Identity",430:"Flow Failed",433:"Anonymity Disallowed",436:"Bad Identity-Info",437:"Unsupported Certificate",438:"Invalid Identity Header",439:"First Hop Lacks Outbound Support",470:"Consent Needed",480:"Number Unavailable",481:"Call/Transaction Does Not Exist",482:"Loop Detected.",483:"Too Many Hops",484:"Address Incomplete",485:"Ambiguous response from server",486:"Number",487:"Request Terminated",488:"Not Acceptable Here",489:"Bad Event",491:"Request Pending",493:"Undecipherable",494:"Security Agreement Required"},{500:"Server Internal Error",501:"Not Implemented",502:"Bad Gateway",503:"Service Unavailable",504:"Server Time-out",505:"Version Not Supported",513:"Message Too Large",580:"Precondition Failure"},{600:"Busy Everywhere",603:"Decline",604:"Does Not Exist Anywhere",606:"Not Acceptable"}];$scope.name=restService.cred,$scope.isUserProfileVisible=!1,$scope.template=templates[0],$scope.ui=uiService.ui.root,$scope.selectedItem=uiService.ui.root.template,$scope.search=uiService.search,$scope.callNo="",$scope.displayNo="",$scope.clicked=!1,$scope.showMainMenu=!1,$scope.showDial=!1,$scope.startNo=!1,$scope.showSearch=!1,$scope.sipEnabled=!1,$scope.searchResult=[],uiService.secondary.conference.init(),$scope.callhistory.clickToCall=function(clicked){$scope.showDialFn(!0),$scope.displayNo=clicked},$scope.showMainMenuFn=function(){$scope.showMainMenu=!$scope.showMainMenu,$scope.showDial=!1,$scope.showSearch=!1,$scope.callNo="",$scope.phone.msg=null},$scope.broadcastViewChange=function(item){$scope.search.t="",$scope.showMainMenu=!1,$scope.showSearch=!1,$scope.selectedItem=item,$scope.phone.msg=null,uiService.util.changeView(item)},$scope.logout=function(){confirm("Are you sure you want to leave?")&&window.location.assign("/sipxconfig/rest/my/logoutunite")},$scope.phone={call:null,active:null,msg:null,disabled:null},$scope.keyboard=[{no:"1",text:""},{no:"2",text:"abc"},{no:"3",text:"def"},{no:"4",text:"ghi"},{no:"5",text:"jkl"},{no:"6",text:"mno"},{no:"7",text:"pqrs"},{no:"8",text:"tuv"},{no:"9",text:"wxyz"},{no:"*",text:""},{no:"0",text:""},{no:"#",text:""}],$scope.showDialFn=function(force){force?$scope.showDial=!0:$scope.showDial=!$scope.showDial,$scope.showMainMenu=!1,$scope.showSearch=!1,$scope.phone.msg=null,$scope.showDial===!1&&($interval.cancel(interval),$scope.phone.disabled=null)},$scope.clearNo=function(){$scope.callNo="",$scope.displayNo=""},$scope.addNo=function(no){$scope.callNo=$scope.callNo+no,$scope.displayNo=$scope.displayNo+no},$scope.phone.call=function(){function startInterval(no){var match,search;interval=$interval(function(){restService.getBasicCall(no).then(function(data){if(0===data.length)return void $interval.cancel(interval);for(var i=1;7>i;i++)if(search=data[data.length-1].status.search(i+"[0-9][0-9]"),-1!==search){if(match=data[data.length-1].status.match(i+"[0-9][0-9]")[0],$scope.phone.msg=sipMessages[i][match],"180"===match&&(timeout=$timeout(function(){interval&&$interval.cancel(interval),$scope.phone.msg=null},1e4)),"183"===match||"180"===match){$scope.phone.disabled=null;break}if("200"===match&&interval){$interval.cancel(interval),$timeout.cancel(timeout);break}if("404"===match||"408"===match||"480"===match||"486"===match){$scope.phone.disabled=null,$timeout.cancel(timeout),interval&&$interval.cancel(interval);break}break}})["catch"](function(status){for(var i=1;7>i;i++)if(search=data[data.length-1].status.search(i+"[0-9][0-9]"),-1!==search){match=data[data.length-1].status.match(i+"[0-9][0-9]")[0],$scope.phone.msg="Error: "+sipMessages[i][match],$timeout.cancel(timeout),interval&&$interval.cancel(interval);break}})},1e3)}var callNo=angular.copy($scope.callNo).replace("(","").replace(")","").replace(".","").replace(" ","").replace("-","");$scope.phone.msg="Requesting call...",$scope.phone.disabled=!0,""!==callNo&&restService.postBasicCall(callNo).then(function(){$scope.phone.disabled=!0,$scope.phone.msg="Requesting call info...",startInterval(callNo)})["catch"](function(status){$scope.phone.msg="Error "+status})},$scope.showSearchFn=function(){$scope.showSearch=!$scope.showSearch,$scope.showMainMenu=!1,$scope.showDial=!1,$scope.callNo="",$scope.phone.msg=null,$scope.showSearch===!1&&uiService.ui.root.template===uiService.ui.root.templates[8]&&(uiService.util.changeView(uiService.ui.root.oldTemplate),$scope.search.t="")},$scope.searchResultClick=function(item){$scope.clicked=!0,$scope.displayNo=item.name,$scope.callNo=angular.copy(item.profile.vCard["X-INTERN"])},$scope.$watchCollection("search",function(val){""===val.t?uiService.util.changeView(uiService.ui.root.oldTemplate):uiService.ui.root.template!==uiService.ui.root.templates[7]&&uiService.util.changeView(uiService.ui.root.templates[7])}),$scope.$watch("displayNo",function(val){if(""===val)$scope.startNo=!1,$scope.callNo=val;else{if($scope.clicked)return $scope.searchResult=[],void($scope.clicked=!1);$scope.callNo=val;var arr=[];val=val.toString().toLowerCase(),$scope.startNo=!0,arr=_.filter(uiService.rosterList.main,function(item){return item.name&&item.number?-1!==item.name.indexOf(val)||-1!==item.number.indexOf(val):!1}),1===arr.length&&arr[0].name===$scope.displayNo?$scope.searchResult=[]:$scope.searchResult=arr}}),$rootScope.$on("controller.mainview.callDialpad",function(e,obj){$scope.showDialFn(!0),$scope.callNo=obj.number,$scope.displayNo=obj.number})}])}(),function(){"use strict";uw.controller("mainview",["$rootScope","$scope","uiService","sharedFactory",function($rootScope,$scope,uiService,sharedFactory){$scope.activityList=uiService.activityList,$scope.phonebook=uiService.rosterList,$scope.root=uiService.ui.root,$scope.selectConversation=uiService.ui.activityList.selectConversation,$scope.removeConversation=uiService.ui.activityList.removeConversation,$scope.search=uiService.search,$scope.muc={showModal:uiService.ui.groupChat.showModal,hideModal:uiService.ui.groupChat.hideModal,conf:uiService.groupChat},$scope.entry={show:!1},$scope.showEntry=function(entry){$scope.entry.profile=angular.copy(entry),$scope.muc.showModal()},$scope.hideEntry=function(){$scope.muc.hideModal(),delete $scope.entry.profile},$scope.callDialpad=function(number){$rootScope.$broadcast("controller.mainview.callDialpad",{number:number})},$scope.$on("services.chat.receivedMessage",function(e,obj){$scope.$apply()}),$scope.$on("services.chat.sentMessage",function(e,obj){}),$scope.$on("services.chat.receivedPresence",function(e,obj){$scope.$apply()}),$scope.$on("services.chat.receivedContactVCard",function(){$scope.$apply()}),$scope.$on("controller.secview.showDefault",function(e,obj){uiService.util.openChat=null}),$scope.$on("services.uiservice.changeview",function(e,obj){!obj.type})}])}(),function(){"use strict";uw.controller("secview",["$scope","uiService",function($scope,uiService){$scope.template=uiService.secondary.template,$scope.chat=uiService.secondary.chat,$scope.voicemail=uiService.secondary.voicemail,$scope.conf=uiService.secondary.conference,$scope.myprofile=uiService.secondary.profile,$scope.callhistory=uiService.secondary.callhistory,$scope.$on("services.uiservice.changeview",function(e,obj){obj.type}),$scope.$on("services.chat.receivedPresence",function(){$scope.$apply()}),$scope.$on("services.ui.queryOccupants",function(){$scope.$apply()}),$scope.$on("services.chat.receivedChatstate",function(){$scope.$apply()})}])}(),function(){"use strict";uw.controller("settingsController",["$rootScope","$scope","$cookieStore","restService","uiService","CONFIG","_",function($rootScope,$scope,$cookieStore,restService,uiService,CONFIG,_){var authCookie=$cookieStore.get("JSESSIONID");$scope.debug=CONFIG.debug?"off":"on",$scope.autoLogin=_.isUndefined(authCookie)?"on":"off",$scope.showResetButtonConn=!1,$scope.showResetButtonDebug=!1,$scope.toggleResetButton=function(str){switch(str){case"conn":$scope.showResetButtonConn=!$scope.showResetButtonConn}},$scope.settings=[{icon:"chat_to_call",name:"Personal Attendant"},{icon:"follow_me",name:"Call Forwarding"},{icon:"dialpad",name:"Speed Dials"},{icon:"settings_cogs",name:"User Settings"}],$scope.tooltips={personalAttendant:{add:{title:"Add dialpad entry",checked:!1},rem:{title:"Remove entry",checked:!1}},fwd:{setup:{add:{title:"Add ring",checked:!1},rem:{title:"Remove ring",checked:!1}},sched:{add:{title:"Add time period",checked:!1},rem:{title:"Remove time period",checked:!1},remSelected:{title:"Discard schedule",checked:!1}}},speed:{add:{title:"Add speed dial",checked:!1},rem:{title:"Remove speed dial",checked:!1}}},$scope.selectOption=function(){switch(_.each($scope.settings,function(o){o.isSelected=!1}),this.option.isSelected=!0,$scope.selected=this.option.name,$scope.selected){case"User Settings":$scope.userSettings.user.init();break;case"Speed Dials":$scope.userSettings.speed.init();break;case"Call Forwarding":$scope.userSettings.fwd.setup.init();break;case"Personal Attendant":$scope.userSettings.personalAttendant.init()}},$scope.reloadApp=uiService.secondary.logout.init,$scope.userSettings=uiService.secondary.settings}])}(),function(){"use strict";uw.controller("UploadFile",["$rootScope","$scope","restService","uiService","CONFIG","FileUploader",function($rootScope,$scope,restService,uiService,CONFIG,FileUploader){$scope.myprofile=uiService.secondary.profile;var uploader=$scope.uploader=new FileUploader({url:CONFIG.baseRest+"/avatar/"+restService.cred.user});uploader.filters.push({name:"customFilter",fn:function(item,options){var type="|"+item.type.slice(item.type.lastIndexOf("/")+1)+"|";return-1!=="|jpg|png|jpeg|bmp|gif|".indexOf(type)}}),uploader.onWhenAddingFileFailed=function(item,filter,options){console.info("onWhenAddingFileFailed",item,filter,options)},uploader.onAfterAddingFile=function(fileItem){console.info("onAfterAddingFile",fileItem),$scope.myprofile.imageData=fileItem,$scope.myprofile.uploadAvatar=!0},uploader.onAfterAddingAll=function(addedFileItems){console.info("onAfterAddingAll",addedFileItems)},uploader.onBeforeUploadItem=function(item){console.info("onBeforeUploadItem",item)},uploader.onProgressItem=function(fileItem,progress){console.info("onProgressItem",fileItem,progress)},uploader.onProgressAll=function(progress){console.info("onProgressAll",progress)},uploader.onSuccessItem=function(fileItem,response,status,headers){console.info("onSuccessItem",fileItem,response,status,headers)},uploader.onErrorItem=function(fileItem,response,status,headers){console.info("onErrorItem",fileItem,response,status,headers)},uploader.onCancelItem=function(fileItem,response,status,headers){console.info("onCancelItem",fileItem,response,status,headers)},uploader.onCompleteItem=function(fileItem,response,status,headers){console.info("onCompleteItem",fileItem,response,status,headers)},uploader.onCompleteAll=function(){console.info("onCompleteAll"),$scope.myprofile.info.profile.avatar=$scope.myprofile.info.profile.avatar+"?"+(new Date).getTime(),$scope.myprofile.uploadAvatar=!1}}])}(),function(){"use strict";uw.controller("UploadMoHFile",["$rootScope","$scope","restService","uiService","CONFIG","FileUploader",function($rootScope,$scope,restService,uiService,CONFIG,FileUploader){$scope.settings=uiService.secondary.settings;var baseRestNew=CONFIG.baseRest.replace("rest","api"),uploader=$scope.uploader=new FileUploader({url:baseRestNew+"/my/moh/prompts"});uploader.filters.push({name:"customFilter",fn:function(item,options){var type="|"+item.type.slice(item.type.lastIndexOf("/")+1)+"|";return-1!=="|wav|mp3|".indexOf(type)}}),uploader.onWhenAddingFileFailed=function(item,filter,options){console.info("onWhenAddingFileFailed",item,filter,options)},uploader.onAfterAddingFile=function(fileItem){console.info("onAfterAddingFile",fileItem);for(var size=$scope.settings.user.moh.selectMoh.length,sameFile=!1,i=0;size>i;i++)$scope.settings.user.moh.selectMoh[i].name===fileItem.file.name&&(sameFile=!0);sameFile===!1&&fileItem.upload()},uploader.onAfterAddingAll=function(addedFileItems){console.info("onAfterAddingAll",addedFileItems)},uploader.onBeforeUploadItem=function(item){console.info("onBeforeUploadItem",item)},uploader.onProgressItem=function(fileItem,progress){console.info("onProgressItem",fileItem,progress)},uploader.onProgressAll=function(progress){console.info("onProgressAll",progress)},uploader.onSuccessItem=function(fileItem,response,status,headers){console.info("onSuccessItem",fileItem,response,status,headers)},uploader.onErrorItem=function(fileItem,response,status,headers){console.info("onErrorItem",fileItem,response,status,headers)},uploader.onCancelItem=function(fileItem,response,status,headers){console.info("onCancelItem",fileItem,response,status,headers)},uploader.onCompleteItem=function(fileItem,response,status,headers){console.info("onCompleteItem",fileItem,response,status,headers),$scope.settings.user.moh.addMoh(fileItem)},uploader.onCompleteAll=function(){console.info("onCompleteAll")}}])}(),function(){"use strict";uw.directive("resize",["$window",function($window){return{scope:!1,link:function(scope,element,attrs){var height,heightDifference="full"===attrs.resize?42:75,$=angular.element,w=$(window);return scope.getWindowDimensions=function(){return{h:$window.innerHeight,w:$window.innerWidth}},scope.$watch(scope.getWindowDimensions,function(newValue,oldValue){function resize(){height=newValue.h-heightDifference,$(element).css("max-height",height+"px")}setTimeout(resize,0),scope.$on("$viewContentLoaded",function(){setTimeout(resize,0)})},!0),w.bind("resize",function(){scope.$apply()}),!0}}}])}(),function(){"use strict";uw.directive("tree",["$compile","_",function($compile,_){return{restrict:"A",scope:{treeKey:"=",treeVal:"=",treeParent:"="},compile:function(el,attrs){var children,parent,template='<label for="{{ treeKey }}" class="col-sm-4 control-label">{{ treeKey | translate }}</label>',spanParent=template+'<div class="col-sm-8"><span data-ng-bind-html="treeVal | linky"></span></div><hr>',spanChildren=template+'<div class="form-group-child col-sm-12 clearfix"data-ng-repeat="(k, v) in treeVal track by $index"><div data-tree data-tree-key="k" data-tree-val="v"></div></div>',inputParent=template+'<div class="col-sm-8"><input type="text" class="form-control" data-ng-model="treeParent[treeKey]"></div><hr>',selectParent=template+'<div class="col-sm-8"><select class="form-control" data-ng-model="treeParent[treeKey]" data-ng-change="profileForm.$setDirty();"><option data-ng-selected="treeParent[treeKey] === true">True</option><option data-ng-selected="treeParent[treeKey] === false">False</option></select></div><hr>',inputChildren=template+'<div class="form-group-child col-sm-12 clearfix"data-ng-repeat="(k, v) in treeVal track by $index"><div data-tree data-tree-key="k" data-tree-val="v" data-tree-input data-tree-parent="treeParent[treeKey]"></div></div>';return""===attrs.treeInput?(parent=inputParent,children=inputChildren):(parent=spanParent,children=spanChildren),function(scope,element,attrs){switch(scope.treeKey){case"avatar":case"timestamp":case"imDisplayName":case"enabled":case"ldapManaged":case"branchName":case"branchAddress":case"officeAddress":case"useBranchAddress":case"salutation":case"employeeId":case"emailAddressAliasesSet":return}return angular.isObject(scope.treeVal)?_.isEmpty(scope.treeVal)?void 0:(element.append(children),void $compile(element.contents())(scope)):(scope.treeVal===!1||scope.treeVal===!0?element.append(selectParent):element.append(parent),void $compile(element.contents())(scope))}}}}])}(),function(){"use strict";uw.filter("time",["$filter",function($filter){return function(input){var day=new Date(input).getUTCDate().toString(),mth=new Date(input).getUTCMonth().toString(),today=(new Date).getUTCDate().toString(),todayMth=(new Date).getUTCMonth().toString();return mth===todayMth&&day===today?$filter("date")(input,"h:mm a"):$filter("date")(input,"short")}}])}(),function(){"use strict";uw.directive("duration",function(){return{restrict:"A",link:function(scope,elem,attrs){var time=attrs.duration,mins=~~(time/60),secs=time%60,ret="";ret+=mins+"min "+(10>secs?"0":""),ret+=""+secs+"s",elem.text(ret)}}})}(),function(){"use strict";uw.directive("maxHeight",["uiService",function(uiService){return{compile:function(){
return function(scope,elem){scope.$watch(function(){return uiService.groupChat.modal},function(newValue,oldValue){newValue?(elem[0].scrollTop=0,angular.element(elem).css({height:"100%",overflow:"hidden"})):angular.element(elem).css({height:"auto",overflow:"auto"})})}}}}])}(),function(){"use strict";uw.filter("translate",function(){return function(input){var translated=input,dict=[{vcard:"ADR",human:"Address"},{vcard:"CTRY",human:"Country"},{vcard:"EXTADD",human:"Ext-Address"},{vcard:"HOME",human:"Home"},{vcard:"LOCALITY",human:"Locality"},{vcard:"PCODE",human:"Postal-Code"},{vcard:"REGION",human:"Region"},{vcard:"STREET",human:"Street"},{vcard:"BDAY",human:"Birthday"},{vcard:"DESC",human:"Description"},{vcard:"EMAIL",human:"Email"},{vcard:"INTERNET",human:"Internet"},{vcard:"PREF",human:"Pref"},{vcard:"USERID",human:"User"},{vcard:"FN",human:"Full-Name"},{vcard:"JABBERID",human:"IM-ID"},{vcard:"N",human:"Names"},{vcard:"FAMILY",human:"Last-Name"},{vcard:"GIVEN",human:"First-Name"},{vcard:"MIDDLE",human:"Middle-Name"},{vcard:"NICKNAME",human:"Nickname"},{vcard:"ORG",human:"Organization"},{vcard:"ORGNAME",human:"Org-Name"},{vcard:"ORGUNIT",human:"Org-Unit"},{vcard:"PHOTO",human:"Photo"},{vcard:"BINVAL",human:"Binary-Value"},{vcard:"TYPE",human:"Type"},{vcard:"ROLE",human:"Role"},{vcard:"TEL",human:"Telephone"},{vcard:"HOME",human:"Home-Phone"},{vcard:"MSG",human:"Messaging"},{vcard:"NUMBER",human:"Number"},{vcard:"TITLE",human:"Title"},{vcard:"URL",human:"Url"},{vcard:"X-ALT-EMAIL",human:"Alt-Email-Addr"},{vcard:"X-ALT-JABBERID",human:"Alt-IM-ID"},{vcard:"X-ASSISTANT",human:"Assistant-Name"},{vcard:"X-ASSISTANT-PHONE",human:"Assistant-Phone-No"},{vcard:"X-DID",human:"DID"},{vcard:"X-FACEBOOK",human:"Facebook-Name"},{vcard:"X-INTERN",human:"Int-Number"},{vcard:"X-LINKEDIN",human:"LinkedIn-Name"},{vcard:"X-LOCATION",human:"Location"},{vcard:"X-MANAGER",human:"Manager"},{vcard:"X-SALUTATION",human:"Salutation"},{vcard:"X-TWITTER",human:"Twitter-Name"},{vcard:"X-XING",human:"Xing-Name"},{vcard:"assistantPhoneNumber",human:"Assistant Phone No."},{vcard:"faxNumber",human:"Fax Number"},{vcard:"avatar",human:"Avatar"},{vcard:"emailAddress",human:"Email Address"},{vcard:"homeAddress",human:"Home Address"},{vcard:"imDisplayName",human:"IM Display Name"},{vcard:"imId",human:"IM ID"},{vcard:"officeAddress",human:"Office Address"},{vcard:"city",human:"City"},{vcard:"country",human:"Country"},{vcard:"officeDesignation",human:"Mail stop"},{vcard:"state",human:"State"},{vcard:"street",human:"Street"},{vcard:"zip",human:"ZIP"},{vcard:"alternateEmailAddress",human:"Alt. Email Addr."},{vcard:"alternateImId",human:"Alt. IM ID"},{vcard:"jobDept",human:"Dept."},{vcard:"jobTitle",human:"Title"},{vcard:"location",human:"Location"},{vcard:"homePhoneNumber",human:"Home Phone"},{vcard:"cellPhoneNumber",human:"Cell Phone"},{vcard:"companyName",human:"Company"},{vcard:"assistantName",human:"Assistant Name"},{vcard:"lastName",human:"Last Name"},{vcard:"useBranchAddress",human:"Use Branch Address"},{vcard:"contact-information",human:"Contact Information"},{vcard:"branchName",human:"Branch Name"},{vcard:"enabled",human:"Enabled"},{vcard:"firstName",human:"First Name"},{vcard:"ldapManaged",human:"LDAP Managed"},{vcard:"salutation",human:"Salutation"},{vcard:"timestamp",human:"Timestamp"},{vcard:"didNumber",human:"DID"},{vcard:"facebookName",human:"FB Name"},{vcard:"linkedinName",human:"LinkedIn Name"},{vcard:"twiterName",human:"Twitter Name"},{vcard:"xingName",human:"XING Name"},{vcard:"branchAddress",human:"Branch Address"},{vcard:"manager",human:"Manager"},{vcard:"confEnter",human:"Conference enter"},{vcard:"confExit",human:"Conference exit"},{vcard:"vmBegin",human:"Voicemail begin"},{vcard:"vmEnd",human:"Voicemail end"}];return _.find(dict,function(obj){return translated===obj.vcard||translated===obj.human?(translated=translated===obj.vcard?obj.human:obj.vcard,!0):void 0}),translated}})}(),function(){"use strict";uw.filter("translateDays",function(){return function(input){var translated=input,dict=[{day:-2,human:"Weekend"},{day:-1,human:"Weekdays"},{day:0,human:"Every day"},{day:1,human:"Sunday"},{day:2,human:"Monday"},{day:3,human:"Tuesday"},{day:4,human:"Wednesday"},{day:5,human:"Thursday"},{day:6,human:"Friday"},{day:7,human:"Saturday"}];return _.find(dict,function(obj){return translated===obj.day?(translated=obj.human,!0):void 0}),translated}})}(),function(){"use strict";uw.filter("translateSchedules",function(){return function(input,array){var translated=input;return null===input?"Always":(_.find(array,function(obj){return obj.scheduleId===input?(translated=obj.name,!0):void 0}),translated)}})}(),function(){"use strict";uw.filter("csearch",[function(){return function(searchArr,keyword){return _.filter(searchArr,function(el){return el.name.toLowerCase().indexOf(keyword)>-1||el.number&&el.number.toString().indexOf(keyword)>-1})}}])}(),function(){"use strict";uw.directive("clickView",function(){return{restrict:"A",link:function(scope,elem,attrs){elem.on("click",function(){return scope.item?void("right"===scope.item.type&&document.querySelector(".right-side-view").scrollIntoView()):"true"===attrs.clickView?void document.querySelector(".right-side-view").scrollIntoView():void document.querySelector(".left-side-view").scrollIntoView()})}}})}(),function(){uw.run(["$templateCache",function($templateCache){"use strict";$templateCache.put("views/activitylist.html",'<div class="main-left-title-wrapper"><i class="icon-activity_stream"></i><h5 class="main-left-title">ACTIVITY LIST</h5></div><div class="alert alert-muted acti-list" data-ng-if="activityList.main.length === 0"><b>No Entries</b></div><div class="entry-wrapper animated fade" data-ng-repeat="entry in (filtered = (activityList.main | orderBy: \'-timestamp\' )) track by $index"><div data-ng-click="selectConversation(entry)" class="entry-container clearfix"><div class="entry-photo pull-left"><img data-ng-show="!entry.type" data-vcard-photo="activityList.main"> <i data-ng-show="entry.type" class="icon-group-chat big-grey"></i> <span data-ng-show="!entry.type" class="entry-status {{ entry.show || \'offline\' }}"></span></div><div class="clearfix" data-ng-click="selectConversation(entry)" data-click-view="true"><div class="entry-name pull-left"><span class="entry-name-big">{{ entry.name }} <span class="label label-default animated fade" data-ng-if="entry.type && !entry.connected">Click to connect</span></span> <span class="entry-msg">{{ entry.status && entry.status !== \'offline\' ? entry.status : \'\' }} {{ entry.last_message ? \' | \' : \'\' }}{{ entry.last_message }}</span></div><div class="entry-misc pull-left"><span data-ng-show="(entry.unread !== 0)" class="entry-unread">{{ entry.unread }}</span> <span data-ng-show="(entry.unread === 0)">{{ entry.timestamp | time:\'activity\' }}</span></div></div></div><span class="entry-remove" data-ng-click="removeConversation(entry)"><i class="icon-close"></i></span></div><div class="rooms-modal roster-modal animated fade" data-ng-show="muc.conf.modal"><div class="clearfix"><div class="main-left-title-wrapper"><i class="icon-activity_stream"></i><h5 class="main-left-title">CONTACTS / PROFILE</h5></div><div data-ng-click="hideEntry()" class="pull-right close-button"><i class="icon-close"></i></div></div><div class="rooms-modal-wrapper"><div class="roster-modal-mini-profile clearfix"><div class="entry-photo pull-left"><img data-ng-src="{{ showPicture(entry.profile) }}"> <span class="entry-status {{ entry.profile.cResource.show || entry.profile.resources }}"></span></div><div class="entry-name pull-left"><span class="entry-name-big">{{ entry.profile.name }}</span> <span class="entry-loc">{{ entry.profile.profile.vCard[\'X-LOCATION\'] || \'-\' }}</span></div></div><div data-ng-if="entry.profile.profile.vCard && entry.profile.profile.vCard[\'X-INTERN\']"><button type="button" class="btn btn-default btn-block" data-ng-click="callDialpad(entry.profile.profile.vCard[\'X-INTERN\'])"><i class="icon-presence_on_the_phone"></i> {{ entry.profile.name }} ({{ entry.profile.profile.vCard[\'X-INTERN\'] }})</button></div><div class="roster-modal-vcard wordwrap"><div class="form-group clearfix" data-ng-show="entry.profile.profile.vCard[\'N\'][\'GIVEN\'].length > 0"><label class="col-sm-4 control-label">First Name</label><div class="col-sm-8"><span>{{entry.profile.profile.vCard[\'N\'][\'GIVEN\'] | linky}}</span></div></div><div class="form-group clearfix" data-ng-show="entry.profile.profile.vCard[\'N\'][\'FAMILY\'].length > 0"><label class="col-sm-4 control-label">Last Name</label><div class="col-sm-8"><span>{{entry.profile.profile.vCard[\'N\'][\'FAMILY\'] | linky}}</span></div></div><div class="form-group clearfix" data-ng-show="entry.profile.profile.vCard[\'EMAIL\'][\'USERID\'].length > 0"><label class="col-sm-4 control-label">Email Address</label><div class="col-sm-8"><span data-ng-bind-html="entry.profile.profile.vCard[\'EMAIL\'][\'USERID\'] | linky"></span></div></div><div class="form-group clearfix" data-ng-show="entry.profile.profile.vCard[\'X-ALT-EMAIL\'].length > 0"><label class="col-sm-4 control-label">Alt Email Address</label><div class="col-sm-8"><span data-ng-bind-html="entry.profile.profile.vCard[\'X-ALT-EMAIL\'] | linky"></span></div></div><div class="form-group clearfix" data-ng-show="entry.profile.profile.vCard[\'JABBERID\'].length > 0"><label class="col-sm-4 control-label">IM ID</label><div class="col-sm-8"><span>{{entry.profile.profile.vCard[\'JABBERID\']}}</span></div></div><div class="form-group clearfix" data-ng-show="entry.profile.profile.vCard[\'X-ALT-JABBERID\'].length > 0"><label class="col-sm-4 control-label">Alt IM ID</label><div class="col-sm-8"><span>{{entry.profile.profile.vCard[\'X-ALT-JABBERID\']}}</span></div></div><div class="form-group clearfix" data-ng-show="entry.profile.profile.vCard[\'X-ASSISTANT\'].length > 0"><label class="col-sm-4 control-label">Assistant Name</label><div class="col-sm-8"><span>{{entry.profile.profile.vCard[\'X-ASSISTANT\']}}</span></div></div><div class="form-group clearfix" data-ng-show="entry.profile.profile.vCard[\'X-ASSISTANT-PHONE\'].length > 0"><label class="col-sm-4 control-label">Assistant Phone No.</label><div class="col-sm-8"><span>{{entry.profile.profile.vCard[\'X-ASSISTANT-PHONE\'] | linky}}</span></div></div><div class="form-group clearfix" data-ng-show="entry.profile.profile.vCard[\'TEL-HOME-CELL\'][\'TEL-HOME-CELL-NUMBER\'].length > 0"><label class="col-sm-4 control-label">Cell Phone</label><div class="col-sm-8"><span>{{entry.profile.profile.vCard[\'TEL-HOME-CELL\'][\'TEL-HOME-CELL-NUMBER\']}}</span></div></div><div class="form-group clearfix" data-ng-show="entry.profile.profile.vCard[\'TEL-HOME-VOICE\'][\'TEL-HOME-VOICE-NUMBER\'].length > 0"><label class="col-sm-4 control-label">Home Phone</label><div class="col-sm-8"><span>{{entry.profile.profile.vCard[\'TEL-HOME-VOICE\'][\'TEL-HOME-VOICE-NUMBER\']}}</span></div></div><div class="form-group clearfix" data-ng-show="entry.profile.profile.vCard[\'TEL-WORK-FAX\'][\'TEL-WORK-FAX-NUMBER\'].length > 0"><label class="col-sm-4 control-label">Fax Number</label><div class="col-sm-8"><span>{{entry.profile.profile.vCard[\'TEL-WORK-FAX\'][\'TEL-WORK-FAX-NUMBER\']}}</span></div></div><div class="form-group clearfix" data-ng-show="entry.profile.profile.vCard[\'X-DID\'].length > 0"><label class="col-sm-4 control-label">DID</label><div class="col-sm-8"><span>{{entry.profile.profile.vCard[\'X-DID\']}}</span></div></div><div class="form-group clearfix" data-ng-show="entry.profile.profile.vCard[\'X-LOCATION\'].length > 0"><label class="col-sm-4 control-label">Location</label><div class="col-sm-8"><span>{{entry.profile.profile.vCard[\'X-LOCATION\']}}</span></div></div><div class="form-group clearfix" data-ng-show="entry.profile.profile.vCard[\'ORG\'][\'ORGNAME\'].length > 0"><label class="col-sm-4 control-label">Company</label><div class="col-sm-8"><span>{{entry.profile.profile.vCard[\'ORG\'][\'ORGNAME\']}}</span></div></div><div class="form-group clearfix" data-ng-show="entry.profile.profile.vCard[\'ORG\'][\'ORGUNIT\'].length > 0"><label class="col-sm-4 control-label">Department</label><div class="col-sm-8"><span>{{entry.profile.profile.vCard[\'ORG\'][\'ORGUNIT\']}}</span></div></div><div class="form-group clearfix" data-ng-show="entry.profile.profile.vCard[\'TITLE\'].length > 0"><label class="col-sm-4 control-label">Title</label><div class="col-sm-8"><span>{{entry.profile.profile.vCard[\'TITLE\']}}</span></div></div><div class="form-group clearfix" data-ng-show="entry.profile.profile.vCard[\'ADR-WORK\'][\'ADR-WORK-STREET\'] ||\n'+"        entry.profile.profile.vCard['ADR-WORK']['ADR-WORK-LOCALITY'] ||\n        entry.profile.profile.vCard['ADR-WORK']['ADR-WORK-REGION'] ||\n        entry.profile.profile.vCard['ADR-WORK']['ADR-WORK-COUNTRY'] ||\n        entry.profile.profile.vCard['ADR-WORK']['ADR-WORK-ZIP']\"><label class=\"col-sm-4 control-label\">Business Address</label><div class=\"form-group-child col-sm-12 clearfix\" data-ng-show=\"entry.profile.profile.vCard['ADR-WORK']['ADR-WORK-STREET'].length > 0\"><div><label class=\"col-sm-4 control-label\">Street</label><div class=\"col-sm-8\"><span>{{entry.profile.profile.vCard['ADR-WORK']['ADR-WORK-STREET']}}</span></div></div></div><div class=\"form-group-child col-sm-12 clearfix\" data-ng-show=\"entry.profile.profile.vCard['ADR-WORK']['ADR-WORK-LOCALITY'].length > 0\"><div><label class=\"col-sm-4 control-label\">City</label><div class=\"col-sm-8\"><span>{{entry.profile.profile.vCard['ADR-WORK']['ADR-WORK-LOCALITY']}}</span></div></div></div><div class=\"form-group-child col-sm-12 clearfix\" data-ng-show=\"entry.profile.profile.vCard['ADR-WORK']['ADR-WORK-REGION'].length > 0\"><div><label class=\"col-sm-4 control-label\">State</label><div class=\"col-sm-8\"><span>{{entry.profile.profile.vCard['ADR-WORK']['ADR-WORK-REGION']}}</span></div></div></div><div class=\"form-group-child col-sm-12 clearfix\" data-ng-show=\"entry.profile.profile.vCard['ADR-WORK']['ADR-WORK-COUNTRY'].length > 0\"><div><label class=\"col-sm-4 control-label\">Country</label><div class=\"col-sm-8\"><span>{{entry.profile.profile.vCard['ADR-WORK']['ADR-WORK-COUNTRY']}}</span></div></div></div><div class=\"form-group-child col-sm-12 clearfix\" data-ng-show=\"entry.profile.profile.vCard['ADR-WORK']['ADR-WORK-ZIP'].length > 0\"><div><label class=\"col-sm-4 control-label\">ZIP</label><div class=\"col-sm-8\"><span>{{entry.profile.profile.vCard['ADR-WORK']['ADR-WORK-ZIP']}}</span></div></div></div></div><div class=\"form-group clearfix\" data-ng-show=\"entry.profile.profile.vCard['ADR-HOME']['ADR-HOME-STREET'] ||\n        entry.profile.profile.vCard['ADR-HOME']['ADR-HOME-LOCALITY'] ||\n        entry.profile.profile.vCard['ADR-HOME']['ADR-HOME-REGION'] ||\n        entry.profile.profile.vCard['ADR-HOME']['ADR-HOME-COUNTRY'] ||\n        entry.profile.profile.vCard['ADR-HOME']['ADR-HOME-ZIP']\"><label class=\"col-sm-4 control-label\">Home Address</label><div class=\"form-group-child col-sm-12 clearfix\" data-ng-show=\"entry.profile.profile.vCard['ADR-HOME']['ADR-HOME-STREET'].length > 0\"><div><label class=\"col-sm-4 control-label\">Street</label><div class=\"col-sm-8\"><span>{{entry.profile.profile.vCard['ADR-HOME']['ADR-HOME-STREET']}}</span></div></div></div><div class=\"form-group-child col-sm-12 clearfix\" data-ng-show=\"entry.profile.profile.vCard['ADR-HOME']['ADR-HOME-LOCALITY'].length > 0\"><div><label class=\"col-sm-4 control-label\">City</label><div class=\"col-sm-8\"><span>{{entry.profile.profile.vCard['ADR-HOME']['ADR-HOME-LOCALITY']}}</span></div></div></div><div class=\"form-group-child col-sm-12 clearfix\" data-ng-show=\"entry.profile.profile.vCard['ADR-HOME']['ADR-HOME-REGION'].length > 0\"><div><label class=\"col-sm-4 control-label\">State</label><div class=\"col-sm-8\"><span>{{entry.profile.profile.vCard['ADR-HOME']['ADR-HOME-REGION']}}</span></div></div></div><div class=\"form-group-child col-sm-12 clearfix\" data-ng-show=\"entry.profile.profile.vCard['ADR-HOME']['ADR-HOME-COUNTRY'].length > 0\"><div><label class=\"col-sm-4 control-label\">Country</label><div class=\"col-sm-8\"><span>{{entry.profile.profile.vCard['ADR-HOME']['ADR-HOME-COUNTRY']}}</span></div></div></div><div class=\"form-group-child col-sm-12 clearfix\" data-ng-show=\"entry.profile.profile.vCard['ADR-HOME']['ADR-HOME-ZIP'].length > 0\"><div><label class=\"col-sm-4 control-label\">ZIP</label><div class=\"col-sm-8\"><span>{{entry.profile.profile.vCard['ADR-HOME']['ADR-HOME-ZIP']}}</span></div></div></div></div><div class=\"form-group clearfix\" data-ng-show=\"entry.profile.profile.vCard['X-FACEBOOK'].length > 0\"><label class=\"col-sm-4 control-label\">FB Name</label><div class=\"col-sm-8\"><span>{{entry.profile.profile.vCard['X-FACEBOOK']}}</span></div></div><div class=\"form-group clearfix\" data-ng-show=\"entry.profile.profile.vCard['X-TWITTER'].length > 0\"><label class=\"col-sm-4 control-label\">Twitter Name</label><div class=\"col-sm-8\"><span>{{entry.profile.profile.vCard['X-TWITTER']}}</span></div></div><div class=\"form-group clearfix\" data-ng-show=\"entry.profile.profile.vCard['X-LINKEDIN'].length > 0\"><label class=\"col-sm-4 control-label\">LinkedIn Name</label><div class=\"col-sm-8\"><span>{{entry.profile.profile.vCard['X-LINKEDIN']}}</span></div></div><div class=\"form-group clearfix\" data-ng-show=\"entry.profile.profile.vCard['X-XING'].length > 0\"><label class=\"col-sm-4 control-label\">XING Name</label><div class=\"col-sm-8\"><span>{{entry.profile.profile.vCard['X-XING']}}</span></div></div></div></div></div>"),$templateCache.put("views/call-history.html",'<div class="sticky-wrapper"><div class="row profile-bar-chat"><div class="col-xs-10"><span>CALL HISTORY</span></div><div class="col-xs-2"><button class="btn btn-link pull-right" data-ng-click="chat.showDefault()" data-click-view="false"><i class="icon-close"></i></button></div></div><div data-resize class="row callhistory-content"><div class="col-md-12 call-options-bar"><p>Start:</p><input type="datetime-local" name="input" ng-model="callhistory.startTime" placeholder="yyyy-MM-ddTHH:mm" required></div><div class="col-md-12 call-options-bar"><p>End:</p><input type="datetime-local" name="input" ng-model="callhistory.endTime" placeholder="yyyy-MM-ddTHH:mm" required></div><div class="col-md-12 callhistory-btn"><button type="button" class="btn btn-success" data-ng-click="callhistory.apply();">Apply</button></div><div class="col-md-12 callhistory-select"><select name="mySelect" ng-options="option.name for option in callhistory.availableOptions track by option.id" ng-model="callhistory.selectedOption"></select><input data-ng-if="callhistory.selectedOption.id != 1" ng-model="callhistory.number"></div><div class="col-md-12 table-responsive"><table class="table table-hover table-bordered"><thead style="background-color: silver"><tr><th>From</th><th>To</th><th>Start</th></tr></thead><tbody><tr dir-paginate="call in callhistory.calls|itemsPerPage:10"><td>{{ call.from }}</td><td ng-click="callhistory.clickToCall(call.to);" style="cursor: pointer">{{ call.to }}</td><td>{{ call.start }}</td></tr></tbody></table><dir-pagination-controls max-size="8" direction-links="true" boundary-links="true"></dir-pagination-controls></div></div></div><div class="sticky"><div class="row bottom-bar"><div class="input-group pull-left"></div></div></div>'),$templateCache.put("views/chat.html",'<div class="sticky-wrapper"><div class="row profile-bar-chat"><div class="col-xs-10"><span>{{ chat.info.name }}</span></div><div class="col-xs-2"><button class="btn btn-link pull-right" data-ng-click="chat.showDefault()" data-click-view="false"><i class="icon-close"></i></button></div></div><div class="row message-list selectable"><div class="message-list" data-ng-class="{\'col-xs-10\': chat.info.groupChat, \'col-xs-12\': !chat.info.groupChat}" data-scroll-glue data-resize><div data-ng-repeat="message in chat.messages" data-ng-class="{ \'last\': $last }" class="col-md-12 message {{ message.type }}"><div class="row"><div class="col-md-12 name">{{ message.fromNormal }}</div></div><div class="line row" data-ng-repeat="item in message.grouped"><div class="content col-xs-9"><span data-ng-bind-html=" item.text | linky:\'_blank\' "></span></div><div class="time col-xs-3 text-right">{{ item.timestamp | time }}</div></div></div><div class="col-md-12" data-ng-if="chat.info.chatstateIcon !== \'\'"><span class="message-list-chatstate"><i class="{{ chat.info.chatstateIcon }}"></i></span></div></div><div data-ng-if="chat.info.groupChat" class="col-xs-2 part-list" data-resize><div data-ng-repeat="entry in chat.info.chatPart[chat.info.jid]">{{ entry.nick }}</div></div></div></div><div class="sticky"><div class="row bottom-bar"><div class="input-group pull-left"><input type="text" data-ng-model="chat.info.outMsg" data-ng-keypress="chat.keyPress($event)" class="form-control" placeholder="Text..."></div></div></div>'),$templateCache.put("views/conference-bridge.html",'<div class="row profile-bar-chat"><div class="col-xs-10"><span>CONFERENCE BRIDGE</span></div><div class="col-xs-2"><button class="btn btn-link pull-right" data-ng-click="chat.showDefault()" data-click-view="false"><i class="icon-close"></i></button></div></div><div class="sticky-wrapper"><div class="row conf"><div class="col-md-12"><div class="row"><div class="col-md-12 conf-options-bar"><p>Use this conference room: <span data-ng-if="conf.err">-</span></p><div class="spinner-wrapper animated fade" data-ng-show="!conf.rooms" data-ng-if="!conf.err"><div class="spinner small"></div></div><select class="animated fade default" data-ng-show="conf.rooms" data-ng-model="conf.select" data-ng-change="conf.changeRoom()" data-ng-options="opt.name for opt in conf.rooms"></select><span data-ng-if="conf.rooms">({{ conf.select.extension }})</span> <button type="button" data-ng-if="conf.refresh || conf.err" data-ng-click="conf.init()" class="btn btn-default pull-right animated fade btn-refresh" title="Refresh"><i class="icon-refresh"></i></button><p class="pull-right status">{{ conf.status }}</p></div></div><div class="alert alert-muted animated fade" data-ng-if="conf.err"><b>No Conference Rooms</b></div><div data-ng-if="!conf.err"><div class="row animated fade"><div class="alert alert-muted animated fade" data-ng-if="conf.participants.length === 0"><b>No Participants</b></div><div data-drop="conf.moveHere" class="conf-move clearfix"><div data-ng-repeat="entry in conf.participants track by $index" data-ng-class="{\'inactive\': !entry.conf.active, \'active\': entry.conf.active}" class="col-xs-3 col-md-2 clearfix part animated ease fade"><img data-ng-src="{{ entry.avatar || \'data:image/png;base64,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\' }}"> <span class="entry-name-big">{{ entry.name }}</span> <span class="entry-remove" data-ng-if="!entry.conf.active" data-ng-click="conf.remove($index)"><i class="icon-close"></i></span><div class="conf-info" data-ng-if="entry.conf.active && (!entry.conf[\'canSpeak\'] || !entry.conf[\'canHear\'])"><i class="icon-volume_mic_mute" data-ng-if="!entry.conf[\'canSpeak\']"></i> <i class="icon-volume_speaker_1_mute" data-ng-if="!entry.conf[\'canHear\']"></i></div><div class="conf-control" data-ng-if="conf.active"><button type="button" data-ng-click="conf.kick(entry)"><i class="icon-presence_on_the_phone"></i></button> <button type="button" data-ng-click="conf.mute(entry)"><i class="icon-volume_mic_mute"></i></button> <button type="button" data-ng-click="conf.deaf(entry)"><i class="icon-volume_speaker_1_mute"></i></button></div></div><div class="col-xs-3 col-md-2 clearfix conf-move-space"></div></div></div><hr><div class="row animated fade"><div class="col-xs-4 col-xs-offset-4" data-ng-if="conf.rooms"><button type="button" data-ng-disabled="(conf.participants.length === 0) || (conf.btnDisabled)" class="btn btn-default btn-lg btn-block" data-ng-click="conf.call()"><i class="icon-presence_on_the_phone" data-ng-class="{\'active\': conf.active, \'inactive\': !conf.active}"></i></button></div></div></div></div></div></div><div class="sticky"></div>'),$templateCache.put("views/default-right.html",'<div class="default-right"></div>'),$templateCache.put("views/groupchats.html",'<div class="main-left-title-wrapper"><i class="icon-group-chat"></i><h5 class="main-left-title">GROUP CHATS</h5></div><div class="entry-wrapper animated fade" data-ng-repeat="entry in (filtered = (activityList.main | orderBy: \'-timestamp\' | filter: {type: \'groupchat\'})) track by $index" data-ng-class="{ \'last\': $last }"><div data-ng-click="selectConversation(entry)" class="entry-container clearfix"><div class="entry-photo pull-left"><img data-ng-show="!entry.type" data-vcard-photo="activityList.main"> <i data-ng-show="entry.type" class="icon-group-chat big-grey"></i> <span data-ng-show="!entry.type" class="entry-status {{ entry.show || \'offline\' }}"></span></div><div class="entry-name pull-left"><span class="entry-name-big">{{ entry.name }} <span class="label label-default animated fade" data-ng-if="entry.type && !entry.connected">Click to connect</span></span> <span class="entry-msg">{{ entry.last_message }}</span></div><div class="entry-misc pull-left"><span data-ng-show="(entry.unread !== 0)" class="entry-unread">{{ entry.unread }}</span> <span data-ng-show="(entry.unread === 0)">{{ entry.timestamp | time }}</span></div></div><span class="entry-remove" data-ng-click="removeConversation(entry)"><i class="icon-close"></i></span></div><div class="group-chat-button"><button type="button" data-ng-click="muc.showModal()" class="btn btn-default btn-lg btn-block">Find / Add group</button></div><div data-ng-show="muc.conf.modal" class="rooms-modal clearfix animated fade"><div class="clearfix"><div class="main-left-title-wrapper"><i class="icon-group-chat"></i><h5 class="main-left-title">GROUP CHATS / FIND-ADD GROUP</h5></div><div data-ng-click="muc.hideModal()" class="pull-right close-button"><i class="icon-close"></i></div></div><form name="mucForm" role="form"><div class="animated fade"><input data-ng-model="muc.conf.muc.room" name="room" type="text" class="form-control" placeholder="Room name"> <input data-ng-model="muc.conf.muc.server" name="server" type="text" class="form-control" placeholder="Server"> <input data-ng-model="muc.conf.muc.handle" name="handle" type="text" class="form-control" placeholder="Handle"> <input data-ng-model="muc.conf.muc.pass" name="pass" type="text" class="form-control" placeholder="Password"></div><div class="clearfix"><button data-ng-click="muc.getRooms(muc.conf.muc.server)" type="button" class="btn btn-default first">Room list</button> <button data-ng-disabled="muc.conf.muc.room === \'\'" data-ng-class="{\'disabled\': muc.conf.muc.room === \'\'}" data-ng-click="muc.joinRoom(muc.conf.muc.room)" type="button" class="btn btn-default">Join</button></div></form><div class="alert alert-warning alert-dismissable animated fade" data-ng-if="muc.conf.muc.err"><button type="button" class="close" aria-hidden="true" data-ng-click="muc.conf.muc.err = null"><i class="icon-close"></i></button><h5>{{muc.conf.muc.err.msg}}</h5><p><small class="text-muted">{{muc.conf.muc.err.failed}}</small></p></div><hr data-ng-show="muc.conf.serverRooms !== null" class="animated fade"><span data-ng-show="muc.conf.serverRooms !== null && muc.conf.serverRooms.length === 0" class="animated fade">Sorry, no groups have been found.</span><div class="server-groups clearfix"><div data-ng-show="muc.conf.serverRooms" data-ng-repeat="entry in (filtered = (muc.conf.serverRooms | orderBy: \'name\')) track by $index" class="server-group animated fade"><div class="entry-name" data-ng-click="muc.joinRoom(entry.name)"><span class="entry-name-big">{{ entry.name }}</span> <i class="icon-group-chat"></i></div></div></div></div>'),
$templateCache.put("views/login.html",'<div id="webchat-login" class="row" data-ng-controller="loginController"><div class="col-xs-4 col-xs-offset-4 well"><legend>Sign in to Unite Web</legend><div class="alert alert-warning animated fade" data-ng-show="error"><button type="button" class="close" data-dismiss="alert" aria-hidden="true" data-ng-click="error = \'\'">&times;</button> <span>{{ error }}<span></span></span></div><div class="alert alert-info animated fade" data-ng-show="info"><span>{{ info }}<span></span></span></div><form method="POST" action="" accept-charset="UTF-8" data-ng-submit="submit()"><div class="form-group"><input type="text" class="form-control" name="username" placeholder="Username" data-ng-model="username"></div><div class="form-group"><input type="password" class="form-control" name="password" placeholder="Password" data-ng-model="password"></div><div class="checkbox"><label><input type="checkbox" name="remember" data-ng-model="remember"> Remember Me</label></div><button type="submit" name="submit" class="btn btn-info btn-block">Sign in</button></form></div></div>'),$templateCache.put("views/main.html",'<div id="webchat-main" class="row"><div class="col-sm-4 col-md-3 left-side-view" data-ng-class="leftSideView"><div class="sticky-wrapper"><div data-ng-controller="profile" class="profile-wrapper"><div class="profile"><div class="row profile-bar unselectable"><div class="col-xs-1 main-buttons main-menu-btn"><button data-ng-click="showMainMenuFn()" data-ng-class="{\'active\': showMainMenu}" class="btn btn-default animated pull-left" title="Menu"><i class="icon-hamburger"></i></button></div><div class="col-xs-7"><p>{{ name.user }}</p></div><div class="col-xs-4 main-buttons"><button type="button" data-ng-click="showSearchFn()" data-ng-class="{\'active\': showSearch}" class="btn btn-default pull-right" title="Search"><i class="icon-ic_search_black_24px"></i></button> <button data-ng-click="showDialFn()" data-ng-class="{\'active\': showDial}" class="btn btn-default pull-right" title="Dialpad"><i class="icon-ic_dialpad_black_24px"></i></button></div></div></div><div data-ng-show="showMainMenu || showDial" class="main-menu-overlay animated fade"></div><div data-ng-show="showMainMenu" class="main-menu animated fadeDown"><div data-ng-repeat="item in (filtered = (ui.templates | filter: { show: true } )) track by $index"><button data-ng-click="broadcastViewChange(item);" data-ng-class="{\'active\': item.name === ui.template.name, \'last\': $last}" data-click-view="true" data-ng-if="item.name !== \'Logout\'" class="btn btn-link btn-lg btn-block"><i data-ng-class="item.iconClass"></i> <span>{{item.name}}</span></button> <a data-ng-if="item.name === \'Logout\'" class="btn btn-link btn-lg btn-block" data-ng-click="logout();"><i class="icon-logout"></i> Logout</a></div></div><div data-ng-show="showDial" class="main-menu animated fadeDown"><div class="well"><div class="alert alert-warning animated fade" data-ng-show="phone.msg"><button type="button" class="close" aria-hidden="true" data-ng-click="phone.msg = \'\'">&times;</button> <span>{{ phone.msg }}<span></span></span></div><div class="input-group"><input type="text" data-ng-model="displayNo" class="form-control" placeholder="Enter a number"> <span class="input-group-btn" data-ng-show="startNo"><button class="btn btn-default clear" type="button" data-ng-click="clearNo()"><i class="icon-close2"></i></button></span></div><div class="social-wrapper animated fade" data-ng-show="startNo && searchResult.length !== 0"><ul class="list-unstyled"><li data-ng-repeat="item in searchResult track by $index" data-ng-click="searchResultClick(item)"><span>{{ item.name }}</span></li></ul></div><div class="keyboard clearfix"><div class="kb-number pull-left col-xs-4" data-ng-repeat="item in keyboard track by $index"><button class="btn btn-default" type="button" data-ng-click="addNo(item.no)"><span class="kb-number-no">{{ item.no }}</span> <span class="kb-number-letters">{{ item.text }}</span></button></div></div><button type="button" data-ng-disabled="callNo === \'\' || phone.disabled === true" class="btn btn-default btn-lg btn-block" data-ng-click="phone.call()"><i class="icon-presence_on_the_phone" data-ng-class="{\'active\': callNo !== \'\' && !phone.disabled, \'inactive\': callNo === \'\' || phone.disabled === true}"></i></button></div></div><div data-ng-show="showSearch" class="main-menu animated fadeDown"><input type="text" data-ng-model="search.t" class="form-control search" placeholder="Search"></div></div><div class="row" data-max-height><div data-ng-controller="mainview" data-ng-include="root.template.url" data-max-height data-resize="full" class="mainview unselectable animated fade"></div></div></div><div class="sticky"></div></div><div class="col-sm-8 col-md-9 right-side-view"><div class="row full-height"><div data-ng-controller="secview" data-ng-include="template.main.url" data-autoscroll class="col-sm-12 secview fade unselectable"></div></div></div></div><div class="spinner-wrapper-big animated fade" data-ng-if="!received"><div class="spinner"></div></div>'),$templateCache.put("views/my-profile.html",'<div class="sticky-wrapper"><div class="row profile-bar-chat"><div class="col-xs-10"><span>MY PROFILE</span></div><div class="col-xs-2"><button class="btn btn-link pull-right" data-ng-click="chat.showDefault()" data-click-view="false"><i class="icon-close"></i></button></div></div><div data-resize class="row my-profile"><div class="row"><div class="col-xs-6"><div class="entry clearfix"><div class="entry-photo pull-left"><img data-ng-src="{{ myprofile.info.profile.avatar }}"></div><div class="pull-left"><div class="entry-name">{{ myprofile.info.profile.firstName + \' \' + myprofile.info.profile.lastName || myprofile.info.profile.imId }}</div><div class="entry-loc">{{ myprofile.info.profile.location }}</div><div ng-controller="UploadFile" class="entry-choose-file"><input type="file" nv-file-select uploader="uploader"></div></div></div></div></div><form class="form-horizontal col-sm-12" role="form" name="profileForm" data-ng-if="myprofile.info.profile"><div class="row"><div class="col-xs-6"><div class="form-groups clearfix"><div class="form-group clearfix"><label class="col-sm-4 control-label">{{ \'firstName\' | translate }}</label><div class="col-sm-8"><input type="text" class="form-control" data-ng-model="myprofile.info.profile.firstName"></div></div><hr><div class="form-group clearfix"><label class="col-sm-4 control-label">{{ \'lastName\' | translate }}</label><div class="col-sm-8"><input type="text" class="form-control" data-ng-model="myprofile.info.profile.lastName"></div></div><hr><div class="form-group clearfix"><label class="col-sm-4 control-label">{{ \'emailAddress\' | translate }}</label><div class="col-sm-8"><input type="text" class="form-control" data-ng-model="myprofile.info.profile.emailAddress"></div></div><hr><div class="form-group clearfix"><label class="col-sm-4 control-label">{{ \'alternateEmailAddress\' | translate }}</label><div class="col-sm-8"><input type="text" class="form-control" data-ng-model="myprofile.info.profile.alternateEmailAddress"></div></div><hr><div class="form-group clearfix"><label class="col-sm-4 control-label">{{ \'imId\' | translate }}</label><div class="col-sm-8"><input type="text" class="form-control" data-ng-model="myprofile.info.profile.imId"></div></div><hr><div class="form-group clearfix"><label class="col-sm-4 control-label">{{ \'alternateImId\' | translate }}</label><div class="col-sm-8"><input type="text" class="form-control" data-ng-model="myprofile.info.profile.alternateImId"></div></div><hr><div class="form-group clearfix"><label class="col-sm-4 control-label">{{ \'assistantName\' | translate }}</label><div class="col-sm-8"><input type="text" class="form-control" data-ng-model="myprofile.info.profile.assistantName"></div></div><hr><div class="form-group clearfix"><label class="col-sm-4 control-label">{{ \'assistantPhoneNumber\' | translate }}</label><div class="col-sm-8"><input type="text" class="form-control" data-ng-model="myprofile.info.profile.assistantPhoneNumber"></div></div><hr><div class="form-group clearfix"><label class="col-sm-4 control-label">{{ \'cellPhoneNumber\' | translate }}</label><div class="col-sm-8"><input type="text" class="form-control" data-ng-model="myprofile.info.profile.cellPhoneNumber"></div></div><hr><div class="form-group clearfix"><label class="col-sm-4 control-label">{{ \'homePhoneNumber\' | translate }}</label><div class="col-sm-8"><input type="text" class="form-control" data-ng-model="myprofile.info.profile.homePhoneNumber"></div></div><hr><div class="form-group clearfix"><label class="col-sm-4 control-label">{{ \'faxNumber\' | translate }}</label><div class="col-sm-8"><input type="text" class="form-control" data-ng-model="myprofile.info.profile.faxNumber"></div></div><hr><div class="form-group clearfix"><label class="col-sm-4 control-label">{{ \'didNumber\' | translate }}</label><div class="col-sm-8"><input type="text" class="form-control" data-ng-model="myprofile.info.profile.didNumber"></div></div><hr><div class="form-group clearfix"><label class="col-sm-4 control-label">{{ \'location\' | translate }}</label><div class="col-sm-8"><input type="text" class="form-control" data-ng-model="myprofile.info.profile.location"></div></div><hr></div></div><div class="col-xs-6"><div class="form-groups"><div class="form-group clearfix"><label class="col-sm-4 control-label">{{ \'companyName\' | translate }}</label><div class="col-sm-8"><input type="text" class="form-control" data-ng-model="myprofile.info.profile.companyName"></div></div><hr><div class="form-group clearfix"><label class="col-sm-4 control-label">{{ \'jobDept\' | translate }}</label><div class="col-sm-8"><input type="text" class="form-control" data-ng-model="myprofile.info.profile.jobDept"></div></div><hr><div class="form-group clearfix"><label class="col-sm-4 control-label">{{ \'jobTitle\' | translate }}</label><div class="col-sm-8"><input type="text" class="form-control" data-ng-model="myprofile.info.profile.jobTitle"></div></div><hr><div class="form-group clearfix"><label class="col-sm-4 control-label">{{ \'homeAddress\' | translate }}</label><div class="form-group-child col-sm-12"><label class="col-sm-4 control-label">{{ \'street\' | translate }}</label><div class="col-sm-8"><input type="text" class="form-control" data-ng-model="myprofile.info.profile.homeAddress.street"></div><hr></div><div class="form-group-child col-sm-12"><label class="col-sm-4 control-label">{{ \'city\' | translate }}</label><div class="col-sm-8"><input type="text" class="form-control" data-ng-model="myprofile.info.profile.homeAddress.city"></div><hr></div><div class="form-group-child col-sm-12"><label class="col-sm-4 control-label">{{ \'state\' | translate }}</label><div class="col-sm-8"><input type="text" class="form-control" data-ng-model="myprofile.info.profile.homeAddress.state"></div><hr></div><div class="form-group-child col-sm-12"><label class="col-sm-4 control-label">{{ \'country\' | translate }}</label><div class="col-sm-8"><input type="text" class="form-control" data-ng-model="myprofile.info.profile.homeAddress.country"></div><hr></div><div class="form-group-child col-sm-12"><label class="col-sm-4 control-label">{{ \'zip\' | translate }}</label><div class="col-sm-8"><input type="text" class="form-control" data-ng-model="myprofile.info.profile.homeAddress.zip"></div><hr></div></div><div class="form-group clearfix"><label class="col-sm-4 control-label">{{ \'facebookName\' | translate }}</label><div class="col-sm-8"><input type="text" class="form-control" data-ng-model="myprofile.info.profile.facebookName"></div></div><hr><div class="form-group clearfix"><label class="col-sm-4 control-label">{{ \'twiterName\' | translate }}</label><div class="col-sm-8"><input type="text" class="form-control" data-ng-model="myprofile.info.profile.twiterName"></div></div><hr><div class="form-group clearfix"><label class="col-sm-4 control-label">{{ \'linkedinName\' | translate }}</label><div class="col-sm-8"><input type="text" class="form-control" data-ng-model="myprofile.info.profile.linkedinName"></div></div><hr><div class="form-group clearfix"><label class="col-sm-4 control-label">{{ \'xingName\' | translate }}</label><div class="col-sm-8"><input type="text" class="form-control" data-ng-model="myprofile.info.profile.xingName"></div></div><hr></div></div></div><div class="clearfix"><button class="btn btn-default pull-left" data-ng-disabled="!profileForm.$dirty && !myprofile.uploadAvatar" data-ng-click="myprofile.init(); profileForm.$setPristine();">Cancel</button> <button class="btn btn-success pull-left" data-ng-disabled="!myprofile.uploadAvatar && (!profileForm.$dirty || profileForm.$invalid)" data-ng-click="myprofile.save(); profileForm.$setPristine();">Save</button><div class="spinner-wrapper pull-left inline animated fade" data-ng-show="myprofile.util.loading"><div class="spinner small"></div></div><span data-ng-if="myprofile.util.success" class="label label-success animated fadeOut">Success</span> <span data-ng-if="myprofile.util.warning" class="label label-warning animated fadeOut">Warning</span></div></form><div class="spinner-wrapper animated fade" data-ng-show="!myprofile.info.profile"><div class="spinner small"></div></div></div></div><div class="sticky"><div class="row bottom-bar"><div class="input-group pull-left"></div></div></div>'),$templateCache.put("views/profile.html",'<div class="row"><div class="col-md-12"><div class="entry clearfix"><div class="entry-photo pull-left"><img data-ng-src="{{ (photoSrc) ? (photoSrc) : (\'styles/images/white_no_pic_provided.png\') }}"> <span class="entry-status {{ status }}"></span></div><div class="entry-details pull-left"><div class="entry-status"><i class="icon-settings"></i> <span>{{ show }}</span></div><div class="entry-location"><i class="icon-location2"></i> <span>{{ location }}</span></div></div></div><hr><div class="presence"><p>PRESENCE</p><div data-ng-repeat="p in presences" data-ng-class="{ \'active\': p.show === show }" data-ng-click="setPresence({icon: p.icon, show: p.show, status: p.status})" class="clearfix"><i style="color: {{p.color}}" class="{{ p.icon }} pull-left"></i> <span class="pull-left">{{ p.show }}</span></div></div><hr><div class="location"><p>LOCATION</p><div data-ng-repeat="l in locations" data-ng-class="{ \'active\': l.text === location }" data-ng-click="setLocation()" class="clearfix"><i class="icon-location2 pull-left"></i> <span class="pull-left">{{ l.text }}</span></div></div></div></div>'),$templateCache.put("views/rosterlist.html",'<div class="main-left-title-wrapper"><i class="icon-presence_meeting"></i><h5 class="main-left-title">CONTACTS</h5></div><div><div data-ng-repeat="entry in (filtered = (phonebook.main | orderBy:\'name\' )) track by $index"><div data-drag data-ng-model="entry" data-ng-click="showEntry(entry)" data-ng-class="{first: $first}" class="entry-container clearfix"><div class="entry-photo pull-left"><img data-ng-src="{{ entry.avatar }}"></div><div class="entry-name pull-left"><span class="entry-name-big">{{ entry.name }}</span> <span class="entry-loc">{{ entry[\'contact-information\'].location || \'-\' }}</span></div></div></div></div><div class="rooms-modal roster-modal animated fade" data-ng-show="muc.conf.modal"><div class="clearfix"><div class="main-left-title-wrapper"><i class="icon-presence_meeting"></i><h5 class="main-left-title">CONTACTS / PROFILE</h5></div><div data-ng-click="hideEntry()" class="pull-right close-button"><i class="icon-close"></i></div></div><div class="rooms-modal-wrapper"><div class="roster-modal-mini-profile clearfix"><div class="entry-photo pull-left"><img data-ng-src="{{ entry.profile.avatar }}"></div><div class="entry-name pull-left"><span class="entry-name-big">{{ entry.profile.name }}</span> <span class="entry-loc">{{ entry.profile[\'contact-information\'].location || \'-\' }}</span></div></div><div><button type="button" class="btn btn-default btn-block" data-ng-click="callDialpad(entry.profile.number)"><i class="icon-presence_on_the_phone"></i> {{ entry.profile.name }} ({{ entry.profile.number }})</button></div><div class="roster-modal-vcard wordwrap"><div class="form-group clearfix" data-ng-show="entry.profile[\'first-name\'].length > 0"><label class="col-sm-4 control-label">First Name</label><div class="col-sm-8"><span>{{entry.profile[\'first-name\'] | linky}}</span></div></div><div class="form-group clearfix" data-ng-show="entry.profile[\'last-name\'].length > 0"><label class="col-sm-4 control-label">Last Name</label><div class="col-sm-8"><span>{{entry.profile[\'last-name\'] | linky}}</span></div></div><div class="form-group clearfix" data-ng-show="entry.profile[\'contact-information\'][\'emailAddress\'].length > 0"><label class="col-sm-4 control-label">Email Address</label><div class="col-sm-8"><span data-ng-bind-html="entry.profile[\'contact-information\'][\'emailAddress\'] | linky"></span></div></div><div class="form-group clearfix" data-ng-show="entry.profile[\'contact-information\'][\'alternateEmailAddress\'].length > 0"><label class="col-sm-4 control-label">Alt Email Address</label><div class="col-sm-8"><span data-ng-bind-html="entry.profile[\'contact-information\'][\'alternateEmailAddress\'] | linky"></span></div></div><div class="form-group clearfix" data-ng-show="entry.profile[\'contact-information\'][\'imId\'].length > 0"><label class="col-sm-4 control-label">IM ID</label><div class="col-sm-8"><span>{{entry.profile[\'contact-information\'][\'imId\']}}</span></div></div><div class="form-group clearfix" data-ng-show="entry.profile[\'contact-information\'][\'alternateImId\'].length > 0"><label class="col-sm-4 control-label">Alt IM ID</label><div class="col-sm-8"><span>{{entry.profile[\'contact-information\'][\'alternateImId\']}}</span></div></div><div class="form-group clearfix" data-ng-show="entry.profile[\'contact-information\'][\'assistantName\'].length > 0"><label class="col-sm-4 control-label">Assistant Name</label><div class="col-sm-8"><span>{{entry.profile[\'contact-information\'][\'assistantName\']}}</span></div></div><div class="form-group clearfix" data-ng-show="entry.profile[\'contact-information\'][\'assistantPhoneNumber\'].length > 0"><label class="col-sm-4 control-label">Assistant Phone No.</label><div class="col-sm-8"><span>{{entry.profile[\'contact-information\'][\'assistantPhoneNumber\'] | linky}}</span></div></div><div class="form-group clearfix" data-ng-show="entry.profile[\'contact-information\'][\'cellPhoneNumber\'].length > 0"><label class="col-sm-4 control-label">Cell Phone</label><div class="col-sm-8"><span>{{entry.profile[\'contact-information\'][\'cellPhoneNumber\']}}</span></div></div><div class="form-group clearfix" data-ng-show="entry.profile[\'contact-information\'][\'homePhoneNumber\'].length > 0"><label class="col-sm-4 control-label">Home Phone</label><div class="col-sm-8"><span>{{entry.profile[\'contact-information\'][\'homePhoneNumber\']}}</span></div></div><div class="form-group clearfix" data-ng-show="entry.profile[\'contact-information\'][\'faxNumber\'].length > 0"><label class="col-sm-4 control-label">Fax Number</label><div class="col-sm-8"><span>{{entry.profile[\'contact-information\'][\'faxNumber\']}}</span></div></div><div class="form-group clearfix" data-ng-show="entry.profile[\'contact-information\'][\'didNumber\'].length > 0"><label class="col-sm-4 control-label">DID</label><div class="col-sm-8"><span>{{entry.profile[\'contact-information\'][\'didNumber\']}}</span></div></div><div class="form-group clearfix" data-ng-show="entry.profile[\'contact-information\'][\'location\'].length > 0"><label class="col-sm-4 control-label">Location</label><div class="col-sm-8"><span>{{entry.profile[\'contact-information\'][\'location\']}}</span></div></div><div class="form-group clearfix" data-ng-show="entry.profile[\'contact-information\'][\'companyName\'].length > 0"><label class="col-sm-4 control-label">Company</label><div class="col-sm-8"><span>{{entry.profile[\'contact-information\'][\'companyName\']}}</span></div></div><div class="form-group clearfix" data-ng-show="entry.profile[\'contact-information\'][\'jobDept\'].length > 0"><label class="col-sm-4 control-label">Department</label><div class="col-sm-8"><span>{{entry.profile[\'contact-information\'][\'jobDept\']}}</span></div></div><div class="form-group clearfix" data-ng-show="entry.profile[\'contact-information\'][\'jobTitle\'].length > 0"><label class="col-sm-4 control-label">Title</label><div class="col-sm-8"><span>{{entry.profile[\'contact-information\'][\'jobTitle\']}}</span></div></div><div class="form-group clearfix" data-ng-show="entry.profile[\'contact-information\'][\'officeAddress\'][\'street\'] ||\n'+"        entry.profile['contact-information']['officeAddress']['city'] ||\n        entry.profile['contact-information']['officeAddress']['state'] ||\n        entry.profile['contact-information']['officeAddress']['country'] ||\n        entry.profile['contact-information']['officeAddress']['zip']\"><label class=\"col-sm-4 control-label\">Business Address</label><div class=\"form-group-child col-sm-12 clearfix\" data-ng-show=\"entry.profile['contact-information']['officeAddress']['street'].length > 0\"><div><label class=\"col-sm-4 control-label\">Street</label><div class=\"col-sm-8\"><span>{{entry.profile['contact-information']['officeAddress']['street']}}</span></div></div></div><div class=\"form-group-child col-sm-12 clearfix\" data-ng-show=\"entry.profile['contact-information']['officeAddress']['city'].length > 0\"><div><label class=\"col-sm-4 control-label\">City</label><div class=\"col-sm-8\"><span>{{entry.profile['contact-information']['officeAddress']['city']}}</span></div></div></div><div class=\"form-group-child col-sm-12 clearfix\" data-ng-show=\"entry.profile['contact-information']['officeAddress']['state'].length > 0\"><div><label class=\"col-sm-4 control-label\">State</label><div class=\"col-sm-8\"><span>{{entry.profile['contact-information']['officeAddress']['state']}}</span></div></div></div><div class=\"form-group-child col-sm-12 clearfix\" data-ng-show=\"entry.profile['contact-information']['officeAddress']['country'].length > 0\"><div><label class=\"col-sm-4 control-label\">Country</label><div class=\"col-sm-8\"><span>{{entry.profile['contact-information']['officeAddress']['country']}}</span></div></div></div><div class=\"form-group-child col-sm-12 clearfix\" data-ng-show=\"entry.profile['contact-information']['officeAddress']['zip'].length > 0\"><div><label class=\"col-sm-4 control-label\">ZIP</label><div class=\"col-sm-8\"><span>{{entry.profile['contact-information']['officeAddress']['zip']}}</span></div></div></div></div><div class=\"form-group clearfix\" data-ng-show=\"entry.profile['contact-information']['homeAddress']['street'] ||\n        entry.profile['contact-information']['homeAddress']['city'] ||\n        entry.profile['contact-information']['homeAddress']['state'] ||\n        entry.profile['contact-information']['homeAddress']['country'] ||\n        entry.profile['contact-information']['homeAddress']['zip']\"><label class=\"col-sm-4 control-label\">Home Address</label><div class=\"form-group-child col-sm-12 clearfix\" data-ng-show=\"entry.profile['contact-information']['homeAddress']['street'].length > 0\"><div><label class=\"col-sm-4 control-label\">Street</label><div class=\"col-sm-8\"><span>{{entry.profile['contact-information']['homeAddress']['street']}}</span></div></div></div><div class=\"form-group-child col-sm-12 clearfix\" data-ng-show=\"entry.profile['contact-information']['homeAddress']['city'].length > 0\"><div><label class=\"col-sm-4 control-label\">City</label><div class=\"col-sm-8\"><span>{{entry.profile['contact-information']['homeAddress']['city']}}</span></div></div></div><div class=\"form-group-child col-sm-12 clearfix\" data-ng-show=\"entry.profile['contact-information']['homeAddress']['state'].length > 0\"><div><label class=\"col-sm-4 control-label\">State</label><div class=\"col-sm-8\"><span>{{entry.profile['contact-information']['homeAddress']['state']}}</span></div></div></div><div class=\"form-group-child col-sm-12 clearfix\" data-ng-show=\"entry.profile['contact-information']['homeAddress']['country'].length > 0\"><div><label class=\"col-sm-4 control-label\">Country</label><div class=\"col-sm-8\"><span>{{entry.profile['contact-information']['homeAddress']['country']}}</span></div></div></div><div class=\"form-group-child col-sm-12 clearfix\" data-ng-show=\"entry.profile['contact-information']['homeAddress']['zip'].length > 0\"><div><label class=\"col-sm-4 control-label\">ZIP</label><div class=\"col-sm-8\"><span>{{entry.profile['contact-information']['homeAddress']['zip']}}</span></div></div></div></div><div class=\"form-group clearfix\" data-ng-show=\"entry.profile['contact-information']['facebookName'].length > 0\"><label class=\"col-sm-4 control-label\">FB Name</label><div class=\"col-sm-8\"><span>{{entry.profile['contact-information']['facebookName']}}</span></div></div><div class=\"form-group clearfix\" data-ng-show=\"entry.profile['contact-information']['twiterName'].length > 0\"><label class=\"col-sm-4 control-label\">Twitter Name</label><div class=\"col-sm-8\"><span>{{entry.profile['contact-information']['twiterName']}}</span></div></div><div class=\"form-group clearfix\" data-ng-show=\"entry.profile['contact-information']['linkedinName'].length > 0\"><label class=\"col-sm-4 control-label\">LinkedIn Name</label><div class=\"col-sm-8\"><span>{{entry.profile['contact-information']['linkedinName']}}</span></div></div><div class=\"form-group clearfix\" data-ng-show=\"entry.profile['contact-information']['xingName'].length > 0\"><label class=\"col-sm-4 control-label\">XING Name</label><div class=\"col-sm-8\"><span>{{entry.profile['contact-information']['xingName']}}</span></div></div></div></div></div>"),$templateCache.put("views/search.html",'<div class="search-view"><div data-ng-repeat="entry in (filtered = (phonebook.main | orderBy:\'name\' | csearch:search.t))"><div data-drag data-ng-model="entry" class="entry-container clearfix"><div class="entry-photo pull-left"><img data-ng-src="{{ entry.avatar }}"></div><div class="entry-name pull-left"><span class="entry-name-big">{{ entry.name }}</span> <span class="entry-loc">{{ entry[\'contact-information\'].location || \'-\' }}</span></div></div></div></div>'),$templateCache.put("views/settings.html",'<div data-ng-controller="settingsController" data-resize><div id="settings-wideview"><div class="settings profile-bar-chat row"><div class="col-xs-10"><span class="settings-title">Settings</span></div><div class="col-xs-2"><button class="btn btn-link pull-right" data-ng-click="chat.showDefault()" data-click-view="false"><i class="icon-close"></i></button></div></div><div id="settings-list" class="row" data-resize="full"><div class="col-sm-4 col-md-3"><div id="settings-menu"><div class="settings-item row unselectable" data-ng-repeat="option in settings" data-ng-click="selectOption()" data-ng-class="{\'active\': option.isSelected}"><span class="col-xs-2"><i class="icon-{{option.icon}}"></i></span> <span class="col-xs-8 settings-item-name">{{option.name}}</span> <span class="col-xs-2 arrow"><i class="icon-arrow_collapse_right"></i></span></div></div></div><div class="col-sm-8 col-md-9 setting-right-side pa unselectable" data-ng-if="selected === \'Personal Attendant\'"><div class="row"><div class="settings-details"><div class="settings-title"><span>Personal Attendant</span><div class="spinner-wrapper animated fade pull-right" data-ng-if="!userSettings.personalAttendant.main && !userSettings.errors.notAvailable"><div class="spinner small"></div></div></div><div class="settings-details-wrapper animated fade" data-ng-if="userSettings.errors.notAvailable"><div class="alert alert-warning"><p><strong>Feature not available</strong></p>Please contact your administrator.</div></div><div class="settings-details-wrapper animated fade" data-ng-if="userSettings.personalAttendant.main.personalAttendantPermission === false"><div class="alert alert-warning"><p><strong>Personal attendant is turned off</strong></p>Please contact your administrator.</div></div><div class="settings-details-wrapper" data-ng-if="(userSettings.errors.notAvailable === false) || (userSettings.personalAttendant.main.personalAttendantPermission === true)"><form name="formPa" novalidate><div class="form-group clearfix"><label class="col-sm-4 control-label">Override default AutoAttendant language</label><div class="col-sm-8"><input type="checkbox" class="form-control" data-ng-model="userSettings.personalAttendant.main.overrideLanguage"> <span class="help-block">Check this box to override the default AutoAttendant language chosen by the administrator.</span></div></div><div class="form-group clearfix" data-ng-if="userSettings.personalAttendant.main.overrideLanguage !== false"><label class="col-sm-4 control-label">Language</label><div class="col-sm-8"><select class="form-control" data-ng-model="userSettings.personalAttendant.main.language" data-ng-options="lang for lang in userSettings.personalAttendant.lang"></select><span class="help-block">The language used by the AutoAttendant if the override checkbox is selected.</span></div></div><div class="form-group clearfix"><label class="col-sm-4 control-label">Operator</label><div class="col-sm-8"><input type="text" class="form-control" data-ng-model="userSettings.personalAttendant.main.operator"> <span class="help-block">Extension or SIP URI the caller is transferred to after pressing 0.</span></div></div><div class="form-group clearfix"><label class="col-sm-4 control-label">Play default voicemail option</label><div class="col-sm-8"><input type="checkbox" class="form-control" data-ng-model="userSettings.personalAttendant.main.playVMDefaultOptions"> <span class="help-block">If enabled default prompt "When you are finished press 1 for more options. To reach the operator, dial 0 at any time." is played.</span></div></div><div class="form-group clearfix"><label class="col-sm-4 control-label">Voicemail deposit</label><div class="col-sm-8"><input type="checkbox" class="form-control" data-ng-model="userSettings.personalAttendant.main.depositVM"> <span class="help-block">If unchecked, callers will not be able to leave you voicemails, but they will be able to transfer to defined numbers. It is good practice to record a greeting explaining this.</span></div></div><div class="form-group clearfix"><label class="col-sm-4 control-label">Forward and Delete voicemail</label><div class="col-sm-8"><input type="checkbox" class="form-control" data-ng-model="userSettings.personalAttendant.main.forwardDeleteVM"> <span class="help-block">If checked, the voicemails that are succesfully emailed will be deleted.</span></div></div><div class="table-responsive"><table class="table"><thead><tr><th width="10%">Dialpad</th><th>Call routes to extension</th><th></th></tr></thead><tbody><tr class="pa-dials" data-ng-repeat="(key, val) in userSettings.personalAttendant.main.menu track by $index"><td><select class="form-control" data-ng-model="key" data-ng-options="c for c in userSettings.personalAttendant.numbers"></select></td><td><input class="pa-val form-control" type="text" data-ng-model="val" min="0" step="1" data-ng-pattern="/^\\d+$/"></td><td><span class="close-inline" title="Remove"><i class="icon-close" data-ng-click="userSettings.personalAttendant.rem(userSettings.personalAttendant.main.menu, null, key); formPa.$setDirty();"></i></span></td></tr><tr class="pa-dials" data-ng-if="userSettings.personalAttendant.showNew" data-ng-repeat="obj in userSettings.personalAttendant.emptyArr track by $index"><td><select class="form-control" data-ng-model="obj.key" data-ng-options="c for c in userSettings.personalAttendant.numbers" data-ng-required="true"></select></td><td><input class="pa-val form-control" type="text" data-ng-model="obj.no" data-ng-pattern="/^\\d+$/" data-ng-required="true"></td><td><span class="close-inline" title="Remove"><i class="icon-close" data-ng-click="userSettings.personalAttendant.rem(userSettings.personalAttendant.emptyArr, $index)"></i></span></td></tr><tr><td colspan="3"><p class="add-btn"><button type="button" class="btn btn-link" data-ng-click="userSettings.personalAttendant.add(); formPa.$setDirty();" title="Add dialpad entry"><b>+</b></button></p></td></tr></tbody></table></div></form><div><button class="btn btn-default" data-ng-disabled="!formPa.$dirty" data-ng-click="userSettings.personalAttendant.cancel(); formPa.$setPristine();">Cancel</button> <button type="button" class="btn btn-success" data-ng-click="userSettings.personalAttendant.save(formPa)" data-ng-disabled="!formPa.$dirty || formPa.$invalid">Save</button><div class="spinner-wrapper inline animated fade" data-ng-show="userSettings.loading"><div class="spinner small"></div></div><span data-ng-if="userSettings.success" class="label label-success animated fadeOut">Success</span> <span data-ng-if="userSettings.warning" class="label label-warning animated fadeOut">Warning</span></div></div></div></div></div><div class="col-sm-8 col-md-9 setting-right-side fwd unselectable" data-ng-if="selected === \'Call Forwarding\'"><div class="row"><div class="settings-details"><div class="settings-title"><span>Call Forwarding</span><div class="spinner-wrapper animated fade pull-right" data-ng-if="!userSettings.fwd.setup.resp && !userSettings.errors.notAvailable"><div class="spinner small"></div></div></div><ul class="nav nav-pills nav-justified"><li data-ng-class="{\'active\': userSettings.fwd.visible === \'setup\'}"><button type="button" class="btn btn-default btn-block" data-ng-click="userSettings.fwd.show(\'setup\')">Set-up</button></li><li data-ng-class="{\'active\': userSettings.fwd.visible === \'schedule\'}"><button type="button" class="btn btn-default btn-block" data-ng-click="userSettings.fwd.show(\'schedule\')">Schedules</button></li></ul><div class="settings-details-wrapper"><div data-ng-if="userSettings.fwd.visible === \'setup\'"><div class="settings-details-wrapper animated fade" data-ng-if="userSettings.errors.notAvailable"><div class="alert alert-warning"><p><strong>Feature not available</strong></p>Please contact your administrator.</div></div><div data-ng-if="!userSettings.errors.notAvailable"><form name="formSetup"><p>Extension will ring first for <input class="fwd-no form-control" type="number" data-ng-model="userSettings.fwd.setup.resp.expiration" data-ng-pattern="/^\\d+$/" data-ng-required="true"> seconds.</p><div class="table-responsive"><table class="table"><thead><tr><th>Active</th><th>Condition</th><th>Schedule</th><th>Forward to</th><th>Timeout (s)</th><th>Move</th><th></th></tr></thead><tbody><tr class="fwd-ring" data-ng-repeat="ring in userSettings.fwd.setup.resp.rings track by $index"><td><input type="checkbox" data-ng-model="ring.enabled" class="form-control"></td><td><select class="form-control" data-ng-model="ring.type" data-ng-options="c for c in userSettings.fwd.setup.defaultTypes"></select></td><td><select class="form-control" data-ng-model="ring.scheduleId" data-ng-options="c as (c | translateSchedules:userSettings.fwd.sched.main) for c in userSettings.fwd.setup.defaultSchedules"></select></td><td><input type="text" class="form-control" data-ng-model="ring.number" data-ng-pattern="/^\\d+$/" data-ng-required="true"></td><td><input type="number" class="form-control" data-ng-model="ring.expiration" data-ng-pattern="/^\\d+$/" data-ng-required="true"></td><td><div class="move-wrapper"><i class="icon-arrow_collapse_up" title="Move up" data-ng-click="userSettings.fwd.setup.moveRing($index, $index-1); formSetup.$setDirty();"></i> <i class="icon-arrow_collapse_down" title="Move down" data-ng-click="userSettings.fwd.setup.moveRing($index, $index+1); formSetup.$setDirty();"></i></div></td><td><div class="tooltip-wrapper"><span class="close-inline" title="Remove"><i class="icon-close" data-ng-click="userSettings.fwd.setup.rem(userSettings.fwd.setup.resp.rings, $index); formSetup.$setDirty();"></i></span></div></td></tr><tr><td colspan="6"><p class="add-btn"><button type="button" class="btn btn-link" title="Add ring" data-ng-click="userSettings.fwd.setup.add(); formSetup.$setDirty();"><b>+</b></button></p></td></tr></tbody></table></div></form><p data-ng-if="userSettings.fwd.setup.resp.withVoicemail">If none of the above answers, the call will be forwarded to your voice mailbox.</p><div><button class="btn btn-default" data-ng-disabled="!formSetup.$dirty" data-ng-click="userSettings.fwd.setup.cancel(); formSetup.$setPristine();">Cancel</button> <button type="button" class="btn btn-success" data-ng-click="userSettings.fwd.setup.save(formSetup)" data-ng-disabled="!formSetup.$dirty || formSetup.$invalid">Save</button><div class="spinner-wrapper inline animated fade" data-ng-show="userSettings.loading"><div class="spinner small"></div></div><span data-ng-if="userSettings.success" class="label label-success animated fadeOut">Success</span> <span data-ng-if="userSettings.warning" class="label label-warning animated fadeOut">Warning</span></div></div></div><div class="fwd-sched" data-ng-if="userSettings.fwd.visible === \'schedule\'"><div class="settings-details-wrapper animated fade" data-ng-if="userSettings.errors.notAvailable"><div class="alert alert-warning"><p><strong>Feature not available</strong></p>Please contact your administrator.</div></div><div data-ng-if="!userSettings.errors.notAvailable"><p data-ng-if="!userSettings.fwd.sched.selected.periods">No schedules found. Add one.</p><div class="clearfix"><div data-ng-if="userSettings.fwd.sched.selected"><p>Select schedule:<select data-ng-model="userSettings.fwd.sched.selected" data-ng-options="c.name for c in userSettings.fwd.sched.main" data-ng-disabled="userSettings.fwd.sched.selected.periods.length === 0" class="form-control"></select><span class="close-inline" title="Remove"><i class="icon-close" data-ng-click="userSettings.fwd.sched.remSelected(); formSched.$setDirty();"></i></span></p></div><form name="formSched"><div class="table-responsive"><table class="table" data-ng-if="userSettings.fwd.sched.selected"><thead><tr><th>Day</th><th>From</th><th>To</th><th></th></tr></thead><tbody><tr class="fwd-ring" data-ng-repeat="prop in userSettings.fwd.sched.selected.periods track by $index"><td><select class="form-control" data-ng-model="prop.scheduledDay" data-ng-options="c as (c | translateDays) for c in userSettings.fwd.sched.predefined" data-ng-required="true"></select></td><td><span><input class="fwd-time form-control" type="text" data-ng-model="prop.start" data-ng-pattern="/^(0?[0-9]|1[0-9]|2[0-3]):[0-5][0-9]$/" data-ng-required="true"></span></td><td><span><input class="fwd-time form-control" type="text" data-ng-model="prop.end" data-ng-pattern="/^(0?[0-9]|1[0-9]|2[0-3]):[0-5][0-9]$/" data-ng-required="true"></span></td><td><div class="tooltip-wrapper"><span class="close-inline" title="Remove"><i class="icon-close" data-ng-click="userSettings.fwd.sched.rem(userSettings.fwd.sched.selected, $index); formSched.$setDirty();"></i></span></div></td></tr><tr><td colspan="4"><p class="add-btn"><button type="button" class="btn btn-link" title="Add time period" data-ng-click="userSettings.fwd.sched.add(userSettings.fwd.sched.selected); formSched.$setDirty();"><b>+</b></button></p></td></tr></tbody></table></div></form><div class="fwd-sched-btns"><button class="btn btn-default" data-ng-click="userSettings.fwd.sched.cancel(); formSched.$setPristine();" data-ng-disabled="!formSched.$dirty">Cancel</button> <button type="button" class="btn btn-success" data-ng-click="userSettings.fwd.sched.save(formSched)" data-ng-disabled="!formSched.$dirty || formSched.$invalid || userSettings.fwd.sched.selected.periods.length === 0">Save</button><div class="spinner-wrapper inline animated fade" data-ng-show="userSettings.loading"><div class="spinner small"></div></div><span data-ng-if="userSettings.success" class="label label-success animated fadeOut">Success</span> <span data-ng-if="userSettings.warning" class="label label-warning animated fadeOut">Warning</span></div></div></div><div class="animated fade" data-ng-if="userSettings.fwd.sched.showNew"><div class="clearfix"><input class="form-control col-xs-4" placeholder="Schedule name" required data-ng-model="userSettings.fwd.sched.showNewEmpty.name" data-ng-minlength="1"> <span class="close-inline" title="Remove"><i class="icon-close" data-ng-click="userSettings.fwd.sched.hideNewEmpty()"></i></span></div><div class="table-responsive"><table class="table"><thead><tr><th>Day</th><th>From</th><th>To</th><th></th></tr></thead><tbody><tr class="fwd-ring" data-ng-repeat="prop in userSettings.fwd.sched.showNewEmpty.periods track by $index"><td><select class="form-control" data-ng-model="prop.scheduledDay" data-ng-options="c as (c | translateDays) for c in userSettings.fwd.sched.predefined" data-ng-required="true"></select></td><td><span><input class="fwd-time form-control" type="text" data-ng-model="prop.start" data-ng-pattern="/^(0?[0-9]|1[0-9]|2[0-3]):[0-5][0-9]$/" data-ng-required="true"></span></td><td><span><input class="fwd-time form-control" type="text" data-ng-model="prop.end" data-ng-pattern="/^(0?[0-9]|1[0-9]|2[0-3]):[0-5][0-9]$/" data-ng-required="true"></span></td><td><div class="tooltip-wrapper"><span class="close-inline" title="Remove"><i class="icon-close" data-ng-click="userSettings.fwd.sched.rem(userSettings.fwd.sched.showNewEmpty, $index)"></i></span></div></td></tr><tr><td colspan="4"><p class="add-btn"><button type="button" class="btn btn-link" title="Add time period" data-ng-click="userSettings.fwd.sched.add(userSettings.fwd.sched.showNewEmpty);"><b>+</b></button></p></td></tr></tbody></table></div></div><p class="animated"><button type="button" class="btn btn-default" data-ng-click="userSettings.fwd.sched.addNew();" data-ng-disabled="userSettings.fwd.sched.selected.periods.length === 0"><span data-ng-if="userSettings.fwd.sched.showNew">Add and save</span> <span data-ng-if="!userSettings.fwd.sched.showNew">Add new schedule</span></button></p></div></div></div></div></div><div class="col-sm-8 col-md-9 setting-right-side unselectable" data-ng-if="selected === \'Speed Dials\'"><div class="row"><div class="settings-details speed"><div class="settings-title"><span>Speed Dials</span><div class="spinner-wrapper animated fade pull-right" data-ng-if="!userSettings.speed.data && !userSettings.errors.notAvailable"><div class="spinner small"></div></div></div><div class="settings-details-wrapper animated fade" data-ng-if="userSettings.errors.notAvailable"><div class="alert alert-warning"><p><strong>Feature not available</strong></p>Please contact your administrator.</div></div><div class="settings-details-wrapper" data-ng-if="!userSettings.errors.notAvailable"><div class="form-group clearfix"><label class="col-sm-5 control-label">Only use Group Speed Dials</label><div class="col-sm-7"><input type="checkbox" class="form-control" data-ng-model="userSettings.speed.data.groupSpeedDial" data-ng-change="formSpeed.$setDirty();"> <span class="help-block">Enabling this option will delete all your existing Speed Dials and replace them with the Group Speed Dials</span></div></div><div data-ng-show="!userSettings.speed.data.groupSpeedDial" class="animated fade"><form name="formSpeed" novalidate><div class="table-responsive"><table class="table"><thead><tr><th>Number</th><th>Name</th><th>Presence</th><th></th><th></th></tr></thead><tbody><tr class="form-group" data-ng-repeat="obj in userSettings.speed.data.buttons track by $index"><td><input type="text" class="form-control" placeholder="Number" data-ng-model="userSettings.speed.data.buttons[$index].number" data-ng-pattern="/(^\\d+|(^(\\w+)@([a-zA-Z0-9_.]+)))$/" data-ng-required="true"></td><td><input type="text" class="form-control" placeholder="Name" data-ng-model="userSettings.speed.data.buttons[$index].label" data-ng-required="true"></td><td><input type="checkbox" class="form-control pull-left" data-ng-model="userSettings.speed.data.buttons[$index].blf" data-ng-disabled="userSettings.speed.data.canSubscribeToPresence === false"></td><td><div class="move-wrapper"><i class="icon-arrow_collapse_up" data-ng-click="userSettings.speed.move($index, $index-1); formSpeed.$setDirty();"></i> <i class="icon-arrow_collapse_down" data-ng-click="userSettings.speed.move($index, $index+1); formSpeed.$setDirty();"></i></div></td><td><div class="tooltip-wrapper"><span class="close-inline" title="Remove"><i class="icon-close" data-ng-click="userSettings.speed.removeEntry($index); formSpeed.$setDirty();"></i></span></div></td></tr><tr><td colspan="4"><p class="add-btn"><button type="button" class="btn btn-link" title="Add speed dial" data-ng-click="userSettings.speed.addEntry(); formSpeed.$setDirty();"><b>+</b></button></p></td></tr></tbody></table></div></form></div><div><button class="btn btn-default" data-ng-disabled="!formSpeed.$dirty" data-ng-click="userSettings.speed.cancel(); formSpeed.$setPristine();">Cancel</button> <button class="btn btn-success" data-ng-click="userSettings.speed.save(formSpeed)" data-ng-disabled="!formSpeed.$dirty || formSpeed.$invalid">Save</button> <button class="btn btn-success" data-ng-click="userSettings.speed.save(formSpeed, true)" data-ng-disabled="!formSpeed.$dirty || formSpeed.$invalid">Save and update phone(s)</button><div class="spinner-wrapper inline animated fade" data-ng-show="userSettings.loading"><div class="spinner small"></div></div><span data-ng-if="userSettings.success" class="label label-success animated fadeOut">Success</span> <span data-ng-if="userSettings.warning" class="label label-warning animated fadeOut">Warning</span></div></div></div></div></div><div class="col-sm-8 col-md-9 setting-right-side unselectable" data-ng-if="selected === \'User Settings\'"><div class="row"><div class="settings-details"><div class="settings-title"><span>User Settings</span><div class="spinner-wrapper animated fade pull-right" data-ng-if="!userSettings.user.buddy && !userSettings.errors.notAvailable"><div class="spinner small"></div></div></div><form name="formUserSettings" novalidate><div><div class="settings-details-wrapper"><div class="form-group clearfix"><label for="inputPass" class="col-sm-3 control-label">User Password</label><div class="col-sm-9"><input type="password" class="form-control" placeholder="Password" data-ng-pattern="/^[a-zA-Z0-9-!$%^&*()_+|~=`{}\\[\\]:;\'<>?,.\\/@#]{8,}$/" data-ng-model="userSettings.user.pass"> <span class="help-block">Used to log into the User Portal and XMPP. Minimum length is 8.</span></div></div><div class="alert alert-warning alert-dismissable animated fade" data-ng-if="userSettings.user.errors.pass"><button type="button" class="close" data-ng-click="userSettings.user.errors.pass = null">&times;</button> Minimum password length: 8</div></div><p class="settings-subtitle">Voicemail</p><div class="settings-details-wrapper animated fade" data-ng-if="userSettings.errors.voicemail"><div class="alert alert-warning"><p><strong>Feature not available</strong></p>Please contact your administrator.</div></div><div class="settings-details-wrapper animated fade" data-ng-if="userSettings.user.vm.main.voicemailPermission === false"><div class="alert alert-warning"><p><strong>Voicemail is turned off</strong></p>Please contact your administrator.</div></div><div class="settings-details-wrapper" data-ng-if="(userSettings.errors.voicemail === false) || (userSettings.user.vm.main.voicemailPermission === true)"><div class="form-group clearfix"><label class="col-sm-3 control-label">Voicemail PIN</label><div class="col-sm-9"><input type="password" class="form-control" placeholder="Password" data-ng-pattern="/^[a-zA-Z0-9]{4,}$/" data-ng-model="userSettings.user.vm.pass"> <span class="help-block">Used to log into voicemail. Numeric PINs are recommended, since only numbers can be dialed. Minimum length is 4.</span></div></div><div class="form-group clearfix"><label class="col-sm-3 control-label">Announcement</label><div class="col-sm-9"><select class="form-control" data-ng-model="userSettings.user.vm.selected" data-ng-options="c.name for c in userSettings.user.vm.select"></select><span class="help-block">Voicemail prompt callers will hear before leaving a message.</span></div></div><div class="form-group clearfix"><label class="col-sm-3 control-label">Email</label><div class="col-sm-9"><input type="email" class="form-control" placeholder="Email" data-ng-model="userSettings.user.vm.main.email"></div></div><div class="form-group clearfix"><label class="col-sm-3 control-label">Attach audio</label><div class="col-sm-9"><input type="checkbox" class="form-control" data-ng-model="userSettings.user.vm.main.emailIncludeAudioAttachment"> <span class="help-block">If checked, the voicemail message will be attached to the notification email. Otherwise, the email will contain a link to retrieve voicemail message.</span></div></div><div class="form-group clearfix"><label class="col-sm-3 control-label">Alternate email</label><div class="col-sm-9"><input type="email" class="form-control" placeholder="Email" data-ng-model="userSettings.user.vm.main.altEmail"></div></div><div class="form-group clearfix"><label class="col-sm-3 control-label">Attach audio</label><div class="col-sm-9"><input type="checkbox" class="form-control" data-ng-model="userSettings.user.vm.main.altEmailIncludeAudioAttachment"></div></div></div><div class="settings-details-wrapper" data-ng-if="!userSettings.errors.confBridge"><p class="settings-subtitle">Conference Bridge</p><div class="form-group clearfix"><label class="col-sm-3 control-label">Room</label><div class="col-sm-9"><select class="form-control" data-ng-model="userSettings.user.conf.selected" data-ng-options="c.name for c in userSettings.user.conf.select" data-ng-change="userSettings.user.conf.changeConf()"></select></div></div><div class="form-group clearfix"><label class="col-sm-3 control-label">Enabled</label><div class="col-sm-9"><input type="checkbox" class="form-control" data-ng-model="userSettings.user.conf.main.enabled"></div></div><div class="form-group clearfix"><label class="col-sm-3 control-label">Name</label><div class="col-sm-9"><input type="text" placeholder="Name" class="form-control" data-ng-model="userSettings.user.conf.main.name" required></div></div><div class="form-group clearfix"><label class="col-sm-3 control-label">Moderator PIN</label><div class="col-sm-9"><input type="text" placeholder="PIN" class="form-control" data-ng-model="userSettings.user.conf.main.moderatorCode" data-ng-pattern="/^\\d+$/"> <span class="help-block">Moderator access code for audio conference. Can be empty. If set, a participant PIN must also be set. Users logged in using this pin are automatically recognised as moderators.</span></div></div><div class="form-group clearfix"><label class="col-sm-3 control-label">Participant PIN</label><div class="col-sm-9"><input type="text" placeholder="PIN" class="form-control" data-ng-model="userSettings.user.conf.main.accessCode" data-ng-pattern="/^\\d+$/"> <span class="help-block">Participant access code for audio conference. Can be empty.</span></div></div><div class="form-group clearfix"><label class="col-sm-3 control-label">Max. members</label><div class="col-sm-9"><input type="number" class="form-control" data-ng-model="userSettings.user.conf.main.maxMembers" data-ng-pattern="/^\\d+$/"> <span class="help-block">The maximum number of call legs to be allowed by this bridge. 0 means unlimited.</span></div></div><div class="form-group clearfix"><label class="col-sm-3 control-label">Quickstart</label><div class="col-sm-9"><input type="checkbox" class="form-control" data-ng-model="userSettings.user.conf.main.quickstart"> <span class="help-block">A non-quickstart conference begins when the chair person arrives. Enable this if you want not to wait for a moderator. Only a quickstart conference can be setup with no PIN.</span></div></div><div class="form-group clearfix"><label class="col-sm-3 control-label">Auto-record</label><div class="col-sm-9"><input type="checkbox" class="form-control" data-ng-model="userSettings.user.conf.main.autorecorded"> <span class="help-block">If checked then conference calls will be recorded to the conference owner\'s mailbox</span></div></div></div><p class="settings-subtitle">Music on hold</p><div class="settings-details-wrapper"><div class="form-group clearfix"><label class="col-sm-3 control-label">Audio source</label><div class="col-sm-9"><select class="form-control" data-ng-disabled="userSettings.errors.moh" data-ng-model="userSettings.user.moh.selected" data-ng-options="c.name for c in userSettings.user.moh.select"></select><span class="help-block">Select the Music on Hold source<br>&nbsp;&nbsp;Personal Music Directory - Personal MoH files listed bellow<br>&nbsp;&nbsp;Group Music Directory - Music from the User Group<br>&nbsp;&nbsp;System Music Directory - MoH defined for the System<br>&nbsp;&nbsp;Use System Configuration - Choose whatever the default is for the system<br>&nbsp;&nbsp;None - No MoH</span></div></div><div class="form-group clearfix"><label class="col-sm-3 control-label">Personal MoH Files</label><div class="col-sm-9"><select class="form-control" data-ng-model="userSettings.user.moh.selectedMoh" data-ng-options="c.name for c in userSettings.user.moh.selectMoh"></select><span class="help-block">Select the Music on Hold file</span><div class="settings-details-wrapper" data-ng-if="!(userSettings.user.moh.selectedMoh.val == \'NONE\')"><button class="btn btn-default" data-ng-click="userSettings.user.moh.listenMoh()">Listen</button> <button class="btn btn-default" data-ng-click="userSettings.user.moh.deleteMoh()">Delete</button></div></div></div><div class="form-group clearfix"><label class="col-sm-3 control-label">Audio file</label><div class="col-sm-9"><div ng-controller="UploadMoHFile"><input type="file" nv-file-select uploader="uploader"></div><span class="help-block">Choose the file from your computer to upload and add it to the Personal MoH files</span></div></div></div><p class="settings-subtitle">MyBuddy</p><div class="settings-details-wrapper animated fade" data-ng-if="userSettings.errors.myBuddy"><div class="alert alert-warning"><p><strong>Feature not available</strong></p>Please contact your administrator.</div></div><div class="settings-details-wrapper" data-ng-if="!userSettings.errors.myBuddy"><div class="form-group clearfix animated fade"><label class="col-sm-4 control-label"><p class="muted">Triggered on:</p></label></div><div class="form-group clearfix animated fade" data-ng-repeat="(key, val) in userSettings.user.buddy track by $index"><label class="col-sm-3 control-label">{{ key | translate }}</label><div class="col-sm-9"><input type="checkbox" class="form-control" data-ng-model="userSettings.user.buddy[key]"></div></div></div></div></form><div class="settings-details-wrapper"><button class="btn btn-default" data-ng-disabled="!formUserSettings.$dirty" data-ng-click="userSettings.user.cancel(); formUserSettings.$setPristine();">Cancel</button> <button class="btn btn-success" data-ng-disabled="!formUserSettings.$dirty || formUserSettings.$invalid" data-ng-click="userSettings.user.save(formUserSettings)">Save</button><div class="spinner-wrapper inline animated fade" data-ng-show="userSettings.user.loading"><div class="spinner small"></div></div></div></div></div></div></div></div></div>'),
$templateCache.put("views/voicemails.html",'<div class="sticky-wrapper"><div class="row profile-bar-chat"><div class="col-xs-10"><span>VOICEMAILS</span></div><div class="col-xs-2"><button class="btn btn-link pull-right" data-ng-click="chat.showDefault()" data-click-view="false"><i class="icon-close"></i></button></div></div><div class="row"><div class="col-md-12 conf-options-bar"><p>Current folder:</p><select class="animated fade default" data-ng-model="voicemail.folder" data-ng-change="voicemail.changeFolder()" data-ng-options="opt.name for opt in voicemail.folders"></select><button type="button" class="btn btn-default pull-right animated fade btn-refresh" title="Refresh" data-ng-click="voicemail.init()"><i class="icon-refresh"></i></button></div></div><div class="voicemail row" data-resize><div class="voicemail-wrapper row animated fade" data-ng-repeat="audio in (filtered = (voicemail.messages)) | orderObjectBy:\'received\':true track by $index"><div class="vmsg col-md-12 clearfix"><div class="col-sm-3 vmsg-name"><span class="subject"><form role="form" name="vmForm"><input type="text" data-ng-model="audio.subject" class="form-control input-sm"></form><span data-ng-if="vmForm.$dirty" class="pull-right"><button type="button" class="btn btn-default btn-xs" data-ng-click="voicemail.cancelChangeSubject(audio.id);vmForm.$setPristine()">Cancel</button> <button type="button" class="btn btn-primary btn-xs" data-ng-click="voicemail.changeSubject(audio.id);vmForm.$setPristine()">Save</button></span></span> <span class="name">{{ audio.author }} <span class="label label-primary" data-ng-if="audio.heard === false">New</span></span>- <span data-duration="{{ audio.duration }}" class="time">{{ audio.duration }}</span></div><div class="col-sm-9 vmsg-msg clearfix"><div class="spinner-wrapper inline animated fade" data-ng-show="audio.loading"><div class="spinner small"></div></div><div class="v-msg-load" data-ng-if="audio.href === undefined || audio.href === \'\'"><button type="button" class="btn btn-default btn-sm" data-ng-click="voicemail.getMessage(audio.id, $index)">Load message.</button></div><div class="v-msg-audio" data-ng-if="audio.href !== undefined && audio.href!==\'\'"><audio controls data-ng-attr-id="{{ audio.id }}" data-ng-src="{{ audio.format==\'mp3\' ? audio.href + \'.mp3\' : audio.href + \'.wav\' }}" data-ng-if="voicemail.mp3Ie(audio.format)" type="{{audio.format==\'mp3\' ? \'audio/mp3\' : \'audio/wav\'}}"></audio><small data-ng-if="!(voicemail.mp3Ie(audio.format))">WAV voicemails cannot be played. In order to listen to this voicemail please download it.</small></div><div class="btn-wrapper"><div class="btn-group btn-group-xs"><a target="_self" data-ng-if="audio.href" data-ng-href="{{ audio.format==\'mp3\' ? audio.href + \'.mp3\' : audio.href + \'.wav\' }}" download="{{ audio.format==\'mp3\' ? audio.id + \'.mp3\' : audio.id + \'.wav\' }}" class="btn btn-default inline-default" title="Download"><i class="icon-downloads"></i></a> <button type="button" class="btn btn-default inline-default" data-ng-click="voicemail.delMessage(audio.id);" title="Trash"><i class="icon-trash"></i></button></div><select class="default" data-ng-model="voicemail.moveVoicemail[audio.id]" data-ng-options="c.name for c in voicemail.folders | filter:{name: \'!\'+voicemail.folder.name}" data-ng-change="voicemail.moveMessage(audio.id)"><option value="">Move to...</option></select></div><div class="pull-right"><span class="received">{{ audio.received | date:\'short\' }}</span></div><div class="pull-left fade left-click-warning" data-ng-if="voicemail.leftClickWarning[audio.id]"><small>In order to save please right-click the Download button and then "Save as..." from the context menu.</small></div></div></div></div><div class="alert alert-muted animated fade" data-ng-if="voicemail.isEmpty()"><b>No Voicemails</b></div><div class="spinner-wrapper animated fade" data-ng-if="!voicemail.messages"><div class="spinner small"></div></div></div></div><div class="sticky"><div class="row bottom-bar"><div class="input-group pull-left"></div></div></div>')}])}();