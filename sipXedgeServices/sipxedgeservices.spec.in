Name: @PACKAGE@
Version: @VERSION@
Release: @PACKAGE_REVISION@

Summary: SIP Bridging Solutions for sipXecs
License: AGPL
Vendor: Ezuce Inc.
Url: http://www.ezuce.com


BuildRequires: automake
BuildRequires: gcc-c++
BuildRequires: cppunit-devel
BuildRequires: zip
%if %{_vendor} == suse
BuildRequires: pwdutils
%else
BuildRequires: shadow-utils
%endif

BuildRequires: sipxcommserverlib-devel  >= %version
BuildRequires: sipxportlib-devel        >= %version
BuildRequires: sipxtacklib-devel        >= %version
BuildRequires: sipxresiprocate-devel    >= %version
BuildRequires: sipxesllib-devel >= %version
BuildRequires: libjsonrpccpp-devel

Requires: sipxesllib
BuildRequires: sipxcommserverlib  >= %version
BuildRequires: sipxportlib        >= %version
BuildRequires: sipxtacklib       >= %version
BuildRequires: sipxresiprocate-libs    >= %version
BuildRequires: sipxesllib >= %version
BuildRequires: libjsonrpccpp


Source:   %name-%version.tar.gz

%description
SIP Bridging Solutions for sipXecs

%package utils
Summary: Utility Applications for sipX Edge Services

%description utils
Utility Applications for sipX Edge Services

%package rpc
Summary: RPC Server for sipX Edge Services

%description rpc
RPC Server for sipX Edge Services

%prep
%setup -q

%build
%configure @SIPX_RPM_CONFIGURE_OPTIONS@
cp config.log %name.configlog
make %{_smp_mflags}

%install
make DESTDIR=%{buildroot} install
rm -rf %{buildroot}/include/esl
rm -rf %{buildroot}/usr/opt/sipxpbx/edge/include

%clean
rm -rf $RPM_BUILD_ROOT

%files
%defattr(644,root,root,755)
%attr(755,root,root) %{_bindir}/sipxwebrtc

%files utils
%defattr(644,root,root,755)
%attr(755,root,root) %{_bindir}/sipxcallgen_fs

%files rpc
%defattr(644,root,root,755)
%attr(755,root,root) %{_bindir}/sipxedgerpc

