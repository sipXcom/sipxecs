#!/bin/bash
#
# Copyright (C) 2010 eZuce Inc.
# Licensed by SIPfoundry under the LGPL license.
#
Action="START"
Status=0
Args=""

while [ $# -ne 0 ]
do
    case ${1} in
        --stop)
            Action=STOP
            ;;

        --configtest)
            Action=CONFIGTEST
            ;;

        *)
            Args="$1"
            ;;
    esac

    shift # always consume 1
done

. @SIPX_LIBEXECDIR@/sipx-utils.sh || exit 1

pidfile = "@SIPX_RUNDIR@/openacd.pid"

case "$Action" in
	START)
		echo $$ > ${pidfile}
		exec @OPENACD_DIR@/boot.rb $Args
		;;

	STOP)
		sipx_stop ${pidfile}
		;;

	CONFIGTEST)
		# no checks yet
		;;
esac

exit $Status