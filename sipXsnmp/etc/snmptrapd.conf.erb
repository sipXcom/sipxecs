authCommunity   log,execute,net public
<%
  unless fwd.nil?
    fwd.each {|f|
%>forward SIPXECS-ALARM-NOTIFICATION-MIB::alarmNotifications <%= f %>
<%
    }
  end
%>

traphandle SIPXECS-ALARM-NOTIFICATION-MIB::alarmNotifications $(sipx.SIPX_LIBEXECDIR)/sipxtrap-handler --in $(sipx.SIPX_CFDATA)/$(sipx.location_id)/snmptrapd.yaml

<%
  alarm.each {|alarm_id, group_ids|
    unless group_ids.nil?
      group.each {|g|
        unless email[g].nil?
          email[g].each {|e|
%>traphandle SIPXECS-ALARM-NOTIFICATION-MIB::alarmNotifications $(sipx.SIPX_LIBEXECDIR)/sipxtrap-handler --in $(sipx.SIPX_CFDATA)/$(sipx.location_id)/snmptrapd.yaml --to <%= e %>
<%
          }
        end     
      }
    end
  }
%>
